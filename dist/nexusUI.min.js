!function t(i,s,e){function h(n,l){if(!s[n]){if(!i[n]){var a="function"==typeof require&&require;if(!l&&a)return a(n,!0);if(o)return o(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var c=s[n]={exports:{}};i[n][0].call(c.exports,function(t){var s=i[n][1][t];return h(s?s:t)},c,c.exports,t,i,s,e)}return s[n].exports}for(var o="function"==typeof require&&require,n=0;n<e.length;n++)h(e[n]);return h}({1:[function(t,s,e){var h=t("./lib/core/manager"),o=t("./lib/utils/dom"),n=t("./lib/utils/drawing"),l=t("./lib/utils/math"),a=t("extend"),r=t("webfontloader");window.nx=new h,window.nx.onload=function(){},window.nx=a(window.nx,o),window.nx=a(window.nx,n),window.nx=a(window.nx,l),window.onload=function(){try{r.load({google:{families:["Open Sans"]}})}catch(t){console.log("font not loaded")}nx.addStylesheet();var s=document.getElementsByTagName("canvas");for(i=0;i<s.length;i++)nx.transform(s[i]);nx.isTouchDevice&&(document.addEventListener("touchmove",nx.blockMove,!0),document.addEventListener("touchstart",nx.blockMove,!0)),nx.onload(),nx.startPulse()}},{"./lib/core/manager":2,"./lib/utils/dom":4,"./lib/utils/drawing":5,"./lib/utils/math":6,extend:52,webfontloader:53}],2:[function(t,i,s){var e=t("../utils/drawing"),h=t("events").EventEmitter,o=t("util"),n=t("../utils/transmit"),l=i.exports=function(){h.apply(this),this.widgets={},this.elemTypeArr=[],this.aniItems=[],this.showLabels=!1,this.starttime=(new Date).getTime(),n&&(this.sendsTo=n.setGlobalTransmit,this.setAjaxPath=n.setAjaxPath,this.destination="js",this.ajaxPath="lib/nexusOSCRelay.php"),this.isTouchDevice="ontouchstart"in document.documentElement,this.metas=document.getElementsByTagName("meta"),this.globalWidgets=!0,this.font="'open sans'",this.fontSize=14,this.fontWeight="normal",this.context=new(window.AudioContext||window.webkitAudioContext),this.sys=navigator.userAgent.toLowerCase(),this.isAndroid=this.sys.indexOf("android")>-1,this.isMobile=this.sys.indexOf("mobile")>-1,this.throttlePeriod=20,this.colors.borderhl=e.shadeBlendConvert(-.5,this.colors.border),this.colors.accenthl=e.shadeBlendConvert(.15,this.colors.accent)};o.inherits(l,h),l.prototype.add=function(t,i){var s;if(t){var e=document.createElement("canvas");return e.setAttribute("nx",t),i&&((i.x||i.y)&&(e.style.position="absolute"),i.x&&(e.style.left=i.x+"px"),i.y&&(e.style.top=i.y+"px"),i.w&&(e.style.width=i.w,"string"!=typeof i.w&&(e.width=i.w)),i.h&&(e.style.height=i.h,"string"!=typeof i.h&&(e.height=i.h)),i.parent&&("string"==typeof i.parent?s=document.getElementById(i.parent):i.parent instanceof HTMLElement?s=i.parent:i.parent instanceof jQuery&&(s=i.parent[0])),i.name&&(e.id=i.name)),s||(s=document.body),s.appendChild(e),this.transform(e)}},l.prototype.transform=function(i,s){for(var e in nx.widgets)if(nx.widgets.hasOwnProperty(e)&&nx.widgets[e].canvasID==i.id)return;var h=s||i.getAttribute("nx");if(h){for(var o,n=0,l=0;l<this.elemTypeArr.length;l++)this.elemTypeArr[l]===h&&n++;if(this.elemTypeArr.push(h),!i.id){var a=n+1;i.id=h+a}if(h)try{var r=t("../widgets");o=new r[h](i.id)}catch(c){return void console.log("creation of "+h+" failed")}return o.type=h,this.widgets[o.canvasID]=o,this.globalWidgets&&(window[o.canvasID]=this.widgets[o.canvasID]),o.init(),o}},l.prototype.transmit=function(t,i){this.makeOSC(this.emit,t,i),this.emit("*",t,i)},l.prototype.colorize=function(t,i){i||(i=t,t="accent"),this.colors[t]=i;var s=this.colors.borderhl=e.shadeBlendConvert(.1,this.colors.border,this.colors.black),h=this.colors.accenthl=e.shadeBlendConvert(.3,this.colors.accent);this.forEachWidget(function(e){e.colors[t]=i,e.colors.borderhl=s,e.colors.accenthl=h,e.draw()})},l.prototype.forEachWidget=function(t){for(var i in this.widgets)this.widgets.hasOwnProperty(i)&&t.call(this,this.widgets[i],i)},l.prototype.setThrottlePeriod=function(t){this.throttlePeriod=t;for(var i in this.widgets)this.widgets.hasOwnProperty(i)&&(this.widgets[i].throttlePeriod=this.throttlePeriod)},l.prototype.colors={accent:"#ff5500",fill:"#eeeeee",border:"#e3e3e3",mid:"#1af",black:"#000000",white:"#FFFFFF"},l.prototype.startPulse=function(){this.pulseInt=setInterval(function(){this.pulse()}.bind(this),30)},l.prototype.stopPulse=function(){clearInterval(this.pulseInt),this.pulseInt=null},l.prototype.pulse=function(){for(var t=0;t<this.aniItems.length;t++)this.aniItems[t]()},l.prototype.addAni=function(t){},l.prototype.removeAni=function(t){this.aniItems.splice(this.aniItems.indexOf(t))},l.prototype.addStylesheet=function(){var t='<style>select {width: 150px;padding: 5px 5px;font-size: 16px;color:#666666;border: solid 2px #e4e4e4;border-radius: 0;-webkit-appearance: none;outline: none;background-color:#EEE;font-family:"open sans";}input[type=text]::-moz-selection { background: transparent; }input[type=text]::selection { background: transparent; }input[type=text]::-webkit-selection { background: transparent; }canvas { border-radius:0px;moz-border-radius:0px;webkit-border-radius:0px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;}input[type=text] { border-radius:5px;moz-border-radius:5px;webkit-border-radius:5px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;}</style>';document.head.innerHTML=document.head.innerHTML+t},l.prototype.setViewport=function(t){for(var i=0;i<this.metas.length;i++)"viewport"==this.metas[i].name&&(this.metas[i].content="minimum-scale="+t+", maximum-scale="+t)},l.prototype.setLabels=function(t){this.showLabels="on"==t,this.forEachWidget(function(t){t.draw()})},l.prototype.setProp=function(t,i){t&&i&&(nx[t]=i,this.forEachWidget(function(s){s[t]=i,s.draw()}))},l.prototype.blockMove=function(t){t.target.attributes.nx&&(t.preventDefault(),this.isAndroid&&(t.stopPropagation?t.stopPropagation():!1))},l.prototype.calculateDigits=function(t){var i,s=this.max?Math.floor(this.max).toString().length:1;i=s<this.maxdigits?3-s:0;return{wholes:s,decimals:i,total:s+i}},l.prototype.themes={light:{fill:"#DDDDDD",border:"#DADADA",black:"#000000",white:"#FFFFFF",body:"#F3F3F3"},dark:{fill:"#222",border:"#292929",black:"#FFFFFF",white:"#000000",body:"#111"},red:"#f24",orange:"#f50",yellow:"#ec1",green:"#1c9",blue:"#09d",purple:"#40a"},l.prototype.skin=function(t){var i=t.split("-");nx.colorize("fill",nx.themes[i[0]].fill),nx.colorize("border",nx.themes[i[0]].border),nx.colorize("black",nx.themes[i[0]].black),nx.colorize("white",nx.themes[i[0]].white),nx.colorize("accent",nx.themes[i[1]]),document.body.style.backgroundColor=nx.themes[i[0]].body},l.prototype.labelSize=function(t){this.forEachWidget(function(i){if(i.label){var s=i.GUI.h+t;i.labelSize=t,["select","number","text"].indexOf(i.type)<0&&i.resize(!1,s)}});var i=document.querySelectorAll(".nxlabel");console.log(i);for(var s=0;s<i.length;s++)console.log(i[s]),i[s].style.fontSize=t/2.8+"px",console.log(i[s].style.fontSize)}},{"../utils/drawing":5,"../utils/transmit":8,"../widgets":18,events:47,util:51}],3:[function(t,i,s){var e=t("events").EventEmitter,h=t("util"),o=t("../utils/dom"),n=t("../utils/drawing"),l=t("../utils/timing"),a=t("../utils/transmit"),r=t("../utils/math"),c=i.exports=function(t){if(e.apply(this),this.preClick=this.preClick.bind(this),this.preMove=this.preMove.bind(this),this.preRelease=this.preRelease.bind(this),this.preTouch=this.preTouch.bind(this),this.preTouchMove=this.preTouchMove.bind(this),this.preTouchRelease=this.preTouchRelease.bind(this),this.canvasID=t,this.oscPath="/"+t,!document.getElementById(t)){var i=document.createElement("canvas");i.id=t,document.body.appendChild(i)}if(this.type=void 0,this.canvas=document.getElementById(t),this.context=this.canvas.getContext("2d"),this.checkPercentage(),this.canvas.className=this.canvas.className?this.canvas.className+=" nx":"nx",this.canvas.height=window.getComputedStyle(document.getElementById(t),null).getPropertyValue("height").replace("px",""),this.canvas.width=window.getComputedStyle(document.getElementById(t),null).getPropertyValue("width").replace("px",""),this.height=parseInt(window.getComputedStyle(document.getElementById(t),null).getPropertyValue("height").replace("px","")),this.width=parseInt(window.getComputedStyle(document.getElementById(t),null).getPropertyValue("width").replace("px","")),this.defaultSize||(this.defaultSize={width:100,height:100}),this.label=!1,this.labelSize=30,this.labelAlign="center",this.labelFont="'Open Sans'",null!=this.canvas.getAttribute("label")&&(this.label=this.canvas.getAttribute("label"),this.origDefaultHeight=this.defaultSize.height),this.label&&(this.defaultSize.height+=this.labelSize),300==this.width&&150==this.height)this.canvas.width=2*this.defaultSize.width,this.canvas.height=2*this.defaultSize.height,this.width=this.defaultSize.width,this.height=this.defaultSize.height;else{var s=this.width,h=this.height;this.canvas.width=2*s,this.canvas.height=2*h,this.width=s,this.height=h}this.canvas.style.width=this.canvas.width/2+"px",this.canvas.style.height=this.canvas.height/2+"px",this.context.scale(2,2),this.makeRoomForLabel(),this.offset=o.findPosition(this.canvas),this.center={x:this.GUI.w/2,y:this.GUI.h/2},this.lineWidth=2,this.context.lineWidth=this.lineWidth,this.colors={};for(var n in nx.colors)this.colors[n]=nx.colors[n];this.clickPos={x:0,y:0},this.clickPos.touches=[],this.clicked=!1,this.value=0,this.val={},this.pval={},this.nodePos=[],this.deltaMove={},this.throttlePeriod=nx.throttlePeriod,this.throttle=l.throttle,this.hasMoved=!1,this.isRecording=!1,this.tapeNum=0,this.recorder=null,a&&(this.sendsTo=a.setWidgetTransmit,this.destination="js"),this.events={},nx.isTouchDevice?(this.canvas.ontouchstart=this.preTouch,this.canvas.ontouchmove=this.preTouchMove,this.canvas.ontouchend=this.preTouchRelease):this.canvas.addEventListener("mousedown",this.preClick,!1),this.fontSize=nx.fontSize,this.fontWeight=nx.fontWeight,this.font=nx.font,this.clickCB=!1,this.releaseCB=!1,this.actuated=!0};h.inherits(c,e),c.prototype.transmit=nx.transmit,c.prototype.makeOSC=function(t,i){if(this.action=t,"object"==typeof i&&null!==i)for(var s in i)if("object"==typeof i[s]&&null!==i[s])for(var e in i[s])this.action(s+"/"+e,i[s][e]);else this.action(s,i[s]);else("number"==typeof i||"string"==typeof i)&&this.action("value",i)},c.prototype.getOffset=function(){this.offset=o.findPosition(this.canvas)},c.prototype.preClick=function(t){this.actuated=!0,this.offset=o.findPosition(this.canvas),this.clickPos=o.getCursorPosition(t,this.offset),document.addEventListener("mousemove",this.preMove,!1),document.addEventListener("mouseup",this.preRelease,!1),this.clicked=!0,this.deltaMove.x=0,this.deltaMove.y=0,this.hasMoved=!1,this.clickCB?this.clickCB():null,this.click(t),document.body.style.userSelect="none",document.body.style.mozUserSelect="none",document.body.style.webkitUserSelect="none",document.body.style.cursor="none"},c.prototype.preMove=function(t){this.actuated=!0;var i=o.getCursorPosition(t,this.offset);this.deltaMove.y=i.y-this.clickPos.y,this.deltaMove.x=i.x-this.clickPos.x,this.clickPos=i,this.hasMoved=!0,this.move(t)},c.prototype.preRelease=function(t){this.actuated=!0,document.removeEventListener("mousemove",this.preMove,!1),document.removeEventListener("mouseup",this.preRelease,!1),this.clicked=!1,this.releaseCB?this.releaseCB():null,this.release(),document.body.style.userSelect="text",document.body.style.mozUserSelect="text",document.body.style.webkitUserSelect="text",document.body.style.cursor="pointer"},c.prototype.preTouch=function(t){this.actuated=!0,this.clickPos=o.getTouchPosition(t,this.offset),this.clicked=!0,this.deltaMove.x=0,this.deltaMove.y=0,this.hasMoved=!1,this.touch(t)},c.prototype.preTouchMove=function(t){if(this.clicked){this.actuated=!0;var i=o.getTouchPosition(t,this.offset);this.deltaMove.y=i.y-this.clickPos.y,this.deltaMove.x=i.x-this.clickPos.x,this.clickPos=i,this.hasMoved=!0,this.touchMove(t)}},c.prototype.preTouchRelease=function(t){this.actuated=!0,t.targetTouches.length>=1?this.clickPos=o.getTouchPosition(t,this.offset):this.clicked=!1,this.touchRelease()},c.prototype.draw=function(){},c.prototype.click=function(){},c.prototype.move=function(){},c.prototype.release=function(){},c.prototype.touch=function(){this.click()},c.prototype.touchMove=function(){this.move()},c.prototype.touchRelease=function(){this.release()},c.prototype.adjustSizeIfDefault=function(){300==this.width&&150==this.height&&(this.canvas.width=this.defaultSize.width,this.canvas.height=this.defaultSize.height,this.width=this.defaultSize.width,this.height=this.defaultSize.height)},c.prototype.makeRoundedBG=function(){this.bgLeft=this.lineWidth,this.bgRight=this.width-this.lineWidth,this.bgTop=this.lineWidth,this.bgBottom=this.height-this.lineWidth,this.bgHeight=this.bgBottom-this.lineWidth,this.bgWidth=this.bgRight-this.lineWidth,n.makeRoundRect(this.context,this.bgLeft,this.bgTop,this.bgWidth,this.bgHeight)},c.prototype.erase=function(){this.context.clearRect(0,0,this.width,this.height)},c.prototype.hideCursor=function(){this.canvas.style.cursor="none"},c.prototype.showCursor=function(){this.canvas.style.cursor="auto"},c.prototype.getName=function(){return"deprecated -- use widget.type instead"},c.prototype.set=function(t,i){if(this.actuated=!1,"object"==typeof this.val&&"null"!==this.val){if("object"==typeof t&&"null"!==t)for(var s in t)this.val[s]=t[s]}else("string"==typeof this.val||"number"==typeof this.val)&&("object"==typeof t&&"null"!==t?(this.val=t.value,this.draw()):("string"==typeof t||"number"==typeof t)&&(this.val=t));this.draw(),i&&this.transmit(this.val,!0)},c.prototype.destroy=function(){var t=nx.elemTypeArr.indexOf(this.getName());nx.elemTypeArr.splice(t,1),this.canvas.ontouchmove=null,this.canvas.ontouchend=null,this.canvas.onclick=null,this.canvas.onmousemove=null,this.canvas.onmouseoff=null,document.removeEventListener("mousemove",this.preMove,!1),document.removeEventListener("mouseup",this.preRelease,!1);var i=document.getElementById(this.canvasID);i&&i.parentNode.removeChild(i),this.customDestroy();var s=this.canvasID;delete nx.widgets[s],delete window[s]},c.prototype.customDestroy=function(){},c.prototype.wrapText=function(t,i,s,e,h){if(t){for(var o=t.split(" "),n="",l=0;l<o.length;l++){var a=n+o[l]+" ",r=this.context.measureText(a),c=r.width;c>e&&l>0?(this.context.fillText(n,i,s),n=o[l]+" ",s+=h):n=a}this.context.fillText(n,i,s)}},c.prototype.drawLabel=function(){this.label&&(this.context.fillStyle=this.colors.black,this.context.textAlign="center",this.context.textBaseline="middle",this.context.font=this.labelSize/2.8+"px "+this.labelFont+" normal",this.context.fillText(this.label,this.width/2,this.labelY))},c.prototype.saveCanv=function(){window.location.href=this.canvas.toDataURL("image/png").replace("image/png","image/octet-stream")},c.prototype.setFont=function(){this.context.textAlign="center",this.context.font=this.fontWeight+" "+this.fontSize+"px "+this.font,this.context.fillStyle=this.colors.black,this.context.globalAlpha=1},c.prototype.checkPercentage=function(){var t=this.canvas.style.width,i=this.canvas.style.height;(t.indexOf("%")>=0||i.indexOf("%")>=0)&&(this.percent={w:t.indexOf("%")>=0?t.replace("%",""):!1,h:i.indexOf("%")>=0?i.replace("%",""):!1},this.stretch())},c.prototype.stretch=function(){window.addEventListener("resize",function(t){var i,s;this.percent.w?(i=window.getComputedStyle(this.canvas.parentNode,null).getPropertyValue("width").replace("px",""),i*=this.percent.w/100):i=!1,this.percent.h?(s=window.getComputedStyle(this.canvas.parentNode,null).getPropertyValue("height").replace("px",""),s*=this.percent.h/100):s=!1,this.resize(i,s)}.bind(this))},c.prototype.resize=function(t,i){this.canvas.width=t?2*t:this.canvas.width,this.canvas.height=i?2*i:this.canvas.height,this.width=t?t:this.width,this.height=i?i:this.height,this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px",this.context.scale(2,2),this.center={x:this.GUI.w/2,y:this.GUI.h/2},this.makeRoomForLabel(),this.init(),this.draw()},c.prototype.normalize=function(t){return r.scale(t,this.min,this.max,0,1)},c.prototype.rangify=function(t){return r.scale(t,0,1,this.min,this.max)},c.prototype.makeRoomForLabel=function(){this.GUI={w:this.width,h:this.label?this.height-this.labelSize:this.height},this.labelY=this.height-this.labelSize/2}},{"../utils/dom":4,"../utils/drawing":5,"../utils/math":6,"../utils/timing":7,"../utils/transmit":8,events:47,util:51}],4:[function(t,i,s){s.findPosition=function(t){var i=document.body,s=document.defaultView,e=document.documentElement,h=document.createElement("div");h.style.paddingLeft=h.style.width="1px",i.appendChild(h);var o=2==h.offsetWidth;i.removeChild(h),h=t.getBoundingClientRect();var n=e.clientTop||i.clientTop||0,l=e.clientLeft||i.clientLeft||0,a=s.pageYOffset||o&&e.scrollTop||i.scrollTop,r=s.pageXOffset||o&&e.scrollLeft||i.scrollLeft;return{top:h.top+a-n,left:h.left+r-l}},s.getCursorPosition=function(t,i){var s,e;void 0!=t.pageX&&void 0!=t.pageY?(s=t.pageX,e=t.pageY):(s=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e=t.clientY+document.body.scrollTop+document.documentElement.scrollTop),s-=i.left,e-=i.top;var h={x:s,y:e};return h.touches=[{x:s,y:e}],h},s.getTouchPosition=function(t,i){var s,e;s=t.targetTouches[0].pageX,e=t.targetTouches[0].pageY,s-=i.left,e-=i.top;var h={x:s,y:e};h.touches=[];for(var o=0;o<t.targetTouches.length;o++)h.touches.push({x:t.targetTouches[o].pageX-i.left,y:t.targetTouches[o].pageY-i.top});h.changed=[];for(var o=0;o<t.changedTouches.length;o++)h.changed.push({x:t.changedTouches[o].pageX-i.left,y:t.changedTouches[o].pageY-i.top});return h}},{}],5:[function(t,i,s){var e=t("./math");s.randomColor=function(){return"rgb("+e.random(250)+","+e.random(250)+","+e.random(250)+")"},s.hexToRgb=function(t,i){var s=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(s,function(t,i,s,e){return i+i+s+s+e+e});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);i||(i=.5);var h=parseInt(e[1],16),o=parseInt(e[2],16),n=parseInt(e[3],16);return"rgba("+h+","+o+","+n+","+i+")"},s.isInside=function(t,i){return t.x>i.x&&t.x<i.x+i.w&&t.y>i.y&&t.y<i.y+i.h?!0:!1},s.makeRoundRect=function(t,i,s,e,h,o){var n=i,l=s,a=e+n,r=h+l;o||(o=2),t.beginPath(),t.moveTo(n+o,l),t.lineTo(a-o,l),t.quadraticCurveTo(a,l,a,l+o),t.lineTo(a,r-o),t.quadraticCurveTo(a,r,a-o,r),t.lineTo(n+o,r),t.quadraticCurveTo(n,r,n,r-o),t.lineTo(n,l+o),t.quadraticCurveTo(n,l,n+o,l),t.closePath()},s.text=function(t,i,s){s||(s=[10,10]),t.beginPath(),t.font="bold 12px sans-serif",t.fillText(i,s[0],s[1]),t.closePath()},s.shadeBlendConvert=function(t,i,s){if("number"!=typeof t||-1>t||t>1||"string"!=typeof i||"r"!=i[0]&&"#"!=i[0]||"string"!=typeof s&&"undefined"!=typeof s)return null;this.sbcRip=function(t){var i=t.length,s={};if(i>9){if(t=t.split(","),t.length<3||t.length>4)return null;s[0]=e(t[0].slice(4)),s[1]=e(t[1]),s[2]=e(t[2]),s[3]=t[3]?parseFloat(t[3]):-1}else{switch(i){case 8:case 6:case 3:case 2:case 1:return null}6>i&&(t="#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+(i>4?t[4]+""+t[4]:"")),t=e(t.slice(1),16),s[0]=t>>16&255,s[1]=t>>8&255,s[2]=255&t,s[3]=9==i||5==i?h((t>>24&255)/255*1e4)/1e4:-1}return s};var e=parseInt,h=Math.round,o=i.length>9,o="string"==typeof s?s.length>9?!0:"c"==s?!o:!1:o,n=0>t,t=n?-1*t:t,s=s&&"c"!=s?s:n?"#000000":"#FFFFFF",l=this.sbcRip(i),a=this.sbcRip(s);return l&&a?o?"rgb("+h((a[0]-l[0])*t+l[0])+","+h((a[1]-l[1])*t+l[1])+","+h((a[2]-l[2])*t+l[2])+(l[3]<0&&a[3]<0?")":","+(l[3]>-1&&a[3]>-1?h(1e4*((a[3]-l[3])*t+l[3]))/1e4:a[3]<0?l[3]:a[3])+")"):"#"+(4294967296+16777216*(l[3]>-1&&a[3]>-1?h(255*((a[3]-l[3])*t+l[3])):a[3]>-1?h(255*a[3]):l[3]>-1?h(255*l[3]):255)+65536*h((a[0]-l[0])*t+l[0])+256*h((a[1]-l[1])*t+l[1])+h((a[2]-l[2])*t+l[2])).toString(16).slice(l[3]>-1||a[3]>-1?1:3):null}},{"./math":6}],6:[function(t,i,s){s.toPolar=function(t,i){var s=Math.sqrt(t*t+i*i),e=Math.atan2(i,t);return 0>e&&(e+=2*Math.PI),{radius:s,angle:e}},s.toCartesian=function(t,i){var s=Math.cos(i),e=Math.sin(i);return{x:t*s,y:t*e*-1}},s.clip=function(t,i,s){return Math.min(s,Math.max(i,t))},s.prune=function(t,i){if("number"==typeof t)t=parseFloat(t.toFixed(i));else if(t instanceof Array)for(var s=0;s<t.length;s++)"number"==typeof t[s]&&(t[s]=parseFloat(t[s].toFixed(i)));return t},s.scale=function(t,i,s,e,h){return(t-i)*(h-e)/(s-i)+e},s.invert=function(t){return s.scale(t,1,0,0,1)},s.bounce=function(t,i,s,e){return t>i&&s>t?e:i>=t?Math.abs(e):t>=s?-1*Math.abs(e):void 0},s.mtof=function(t){return 440*Math.pow(2,(t-69)/12)},s.random=function(t){return Math.floor(Math.random()*t)},s.interp=function(t,i,s){return t*(s-i)+i},s.lphistory={},s.lp=function(t,i,s){this.lphistory[t]||(this.lphistory[t]=[]);var e=0;this.lphistory[t].push(i),this.lphistory[t].length>s&&this.lphistory[t].splice(0,1);for(var h=0;h<this.lphistory[t].length;h++)e+=this.lphistory[t][h];return e/this.lphistory[t].length},s.lp2=function(t,i){for(var s=0,e=0;e<this.lphistory.length;e++)s+=this.lphistory[e];s+=t;var h=s/(this.lphistory.length+1);return this.lphistory.push(h),this.lphistory.length>i&&this.lphistory.splice(0,1),h},s.lp3=function(t,i,s){var e=t+i*s;return e/(s+1)}},{}],7:[function(t,i,s){s.throttle=function(t,i){var s;return function(){var e=this,h=arguments;s||(s=setTimeout(function(){s=null;try{t.apply(e,h)}catch(i){console.log(i)}},i))}}},{}],8:[function(t,i,s){s.defineTransmit=function(t){if("function"==typeof t)return t;switch(t){case"js":return function(t,i){this.makeOSC(this.emit,t,i),this.emit("*",t,i)};case"ajax":return function(t){this.makeOSC(s.ajaxTransmit,t)};case"node":return function(t){this.makeOSC(s.nodeTransmit,t)};case"ios":return function(t){};case"max":return function(t){this.makeOSC(s.maxTransmit,t)};case"wc":return function(t,i){this.emit("internal",t,i)}}},s.setGlobalTransmit=function(t){var i=s.defineTransmit(t);this.transmit=i,this.destination=t;for(var e in nx.widgets)this.widgets[e].transmit=i,this.widgets[e].destination=t},s.setWidgetTransmit=function(t){this.transmit=s.defineTransmit(t),this.destination=t},s.ajaxTransmit=function(t,i){var s="value"==t?this.oscPath:this.oscPath+"/"+t,e=new XMLHttpRequest;e.open("POST",nx.ajaxPath,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send("oscName="+s+"&data="+i)},s.setAjaxPath=function(t){this.ajaxPath=t},s.nodeTransmit=function(t,i){var s={oscName:"value"==t?this.oscPath:this.oscPath+"/"+t,value:i};socket.emit("nx",s)},s.maxTransmit=function(t,i){var s="value"==t?this.oscPath:this.oscPath+"/"+t;window.max.outlet(s+" "+i)}},{}],9:[function(t,i,s){var e=t("util"),h=t("../core/widget"),o=i.exports=function(t){this.defaultSize={width:100,height:40},h.call(this,t),this.message1="Powered By",this.message2="NexusUI",this.link="http://www.nexusosc.com",this.isLink=!0};e.inherits(o,h),o.prototype.init=function(){this.draw()},o.prototype.draw=function(){var t=this.context;t.globalAlpha=.1,t.fillStyle=this.colors.accent,t.beginPath(),t.moveTo(0,10),t.lineTo(10,this.GUI.h/2+5),t.lineTo(0,this.GUI.h),t.lineTo(30,this.GUI.h),t.lineTo(30,10),t.fill(),t.moveTo(this.GUI.w-30,10),t.lineTo(this.GUI.w-30,this.GUI.h),t.lineTo(this.GUI.w,this.GUI.h),t.lineTo(this.GUI.w-10,this.GUI.h/2+5),t.lineTo(this.GUI.w,10),t.fill(),t.closePath(),t.globalAlpha=1,t.fillStyle=this.colors.accent,t.fillRect(15,0,this.GUI.w-30,this.GUI.h-10),t.fillStyle=this.colors.white,t.font=this.fontWeight+" "+this.GUI.h/5+"px "+this.font,t.textAlign="center",t.fillText(this.message1,this.GUI.w/2,this.GUI.h/3.3),t.fillText(this.message2,this.GUI.w/2,this.GUI.h/3.3*2),t.fillStyle=this.colors.black,t.beginPath(),t.moveTo(15,this.GUI.h-10),t.lineTo(30,this.GUI.h),t.lineTo(30,this.GUI.h-10),t.lineTo(15,this.GUI.h-10),t.fill(),t.moveTo(this.GUI.w-15,this.GUI.h-10),t.lineTo(this.GUI.w-30,this.GUI.h),t.lineTo(this.GUI.w-30,this.GUI.h-10),t.lineTo(this.GUI.w-15,this.GUI.h-10),t.fill(),t.closePath()},o.prototype.click=function(){this.isLink&&(window.location=this.link)}},{"../core/widget":3,util:51}],10:[function(t,i,s){var e=t("util"),h=t("../core/widget"),o=t("../utils/drawing"),n=i.exports=function(t){this.defaultSize={width:50,height:50},h.call(this,t),this.val={press:0},this.mode="aftertouch",this.lockResize=!0,this.image=null,this.imageHover=null,this.imageTouch=null,this.subval={},this.init()};e.inherits(n,h),n.prototype.init=function(){this.center={x:this.GUI.w/2,y:this.GUI.h/2},this.strokeWidth=this.GUI.w/20,this.radius=Math.min(this.center.x,this.center.y),this.draw()},n.prototype.draw=function(){this.erase();var t=this.context;if(null!==this.image)this.val.press?this.imageTouch?t.drawImage(this.imageTouch,0,0):(t.drawImage(this.image,0,0),t.globalAlpha=.5,t.fillStyle=this.colors.accent,t.fillRect(0,0,this.GUI.w,this.GUI.h),t.globalAlpha=1):t.drawImage(this.image,0,0);else if(this.val.press?this.val.press&&(t.fillStyle=this.colors.accent,t.strokeStyle=this.colors.accenthl):(t.fillStyle=this.colors.fill,t.strokeStyle=this.colors.border),t.lineWidth=this.strokeWidth,t.beginPath(),t.arc(this.center.x,this.center.y,this.radius,0,2*Math.PI,!0),t.fill(),t.closePath(),t.beginPath(),t.arc(this.center.x,this.center.y,this.radius-t.lineWidth/2,0,2*Math.PI,!0),t.stroke(),t.globalAlpha=1,t.closePath(),this.val.press&&"aftertouch"==this.mode){var i=nx.clip(this.clickPos.x,.2*this.GUI.w,this.GUI.w/1.3),s=nx.clip(this.clickPos.y,.2*this.GUI.h,this.GUI.h/1.3),e=this.context.createRadialGradient(i,s,this.GUI.w/6,this.center.x,this.center.y,1.3*this.radius);e.addColorStop(0,this.colors.accent),e.addColorStop(1,"white"),t.strokeStyle=e,t.lineWidth=this.GUI.w/20,t.beginPath(),t.arc(this.center.x,this.center.y,this.radius-this.GUI.w/40,0,2*Math.PI,!0),t.stroke(),t.closePath()}this.drawLabel()},n.prototype.click=function(t){o.isInside(this.clickPos,{x:this.center.x-this.radius,y:this.center.y-this.radius,w:2*this.radius,h:2*this.radius})&&(this.val.press=1,"aftertouch"==this.mode&&(this.val.x=this.clickPos.x,this.val.y=this.clickPos.y),this.transmit(this.val),this.draw())},n.prototype.move=function(){"aftertouch"==this.mode&&(this.val.x=this.clickPos.x,this.val.y=this.clickPos.y,this.subval.x=this.clickPos.x,this.subval.y=this.clickPos.y,this.transmit(this.subval),this.draw())},n.prototype.release=function(){this.val.press=0,("toggle"==this.mode||"aftertouch"==this.mode)&&this.transmit(this.val),this.draw()},n.prototype.setImage=function(t){this.image=new Image,this.image.onload=this.draw.bind(this),this.image.src=t},n.prototype.setHoverImage=function(t){this.imageHover=new Image,this.imageHover.onload=this.draw.bind(this),this.imageHover.src=t},n.prototype.setTouchImage=function(t){this.imageTouch=new Image,this.imageTouch.onload=this.draw.bind(this),this.imageTouch.src=t}},{"../core/widget":3,"../utils/drawing":5,util:51}],11:[function(t,i,s){var e=t("util"),h=t("../core/widget"),o=i.exports=function(t){this.defaultSize={width:100,height:100},h.call(this,t),this.init()};e.inherits(o,h),o.prototype.init=function(){this.gradient1=this.context.createLinearGradient(0,0,this.GUI.w,0),this.gradient1.addColorStop(0,"#F00"),this.gradient1.addColorStop(.17,"#FF0"),this.gradient1.addColorStop(.34,"#0F0"),this.gradient1.addColorStop(.51,"#0FF"),this.gradient1.addColorStop(.68,"#00F"),this.gradient1.addColorStop(.85,"#F0F"),this.gradient1.addColorStop(1,"#F00"),this.gradient2=this.context.createLinearGradient(0,0,0,this.GUI.h),this.gradient2.addColorStop(0,"rgba(0,0,0,255)"),this.gradient2.addColorStop(.49,"rgba(0,0,0,0)"),this.gradient2.addColorStop(.51,"rgba(255,255,255,0)"),this.gradient2.addColorStop(.95,"rgba(255,255,255,255)"),this.draw()},o.prototype.draw=function(){this.erase();var t=this.context;t.fillStyle=this.gradient1,t.fillRect(0,0,this.GUI.w,this.GUI.h),t.fillStyle=this.gradient2,t.fillRect(0,0,this.GUI.w,this.GUI.h),this.drawLabel()},o.prototype.drawColor=function(){var t=this.context;t.fillStyle="rgb("+this.val.r+","+this.val.g+","+this.val.b+")",t.fillRect(0,.95*this.GUI.h,this.GUI.w,.05*this.GUI.h)},o.prototype.click=function(t){if(this.clickPos.x>0&&this.clickPos.y>0&&this.clickPos.x<this.GUI.w&&this.clickPos.y<this.GUI.h){var i=this.context.getImageData(2*this.clickPos.x,2*this.clickPos.y,1,1);this.val={r:i.data[0],g:i.data[1],b:i.data[2]},this.transmit(this.val),this.drawColor()}},o.prototype.move=function(t){this.click(t)}},{"../core/widget":3,util:51}],12:[function(t,i,s){var e=t("util"),h=t("../core/widget"),o=i.exports=function(t){this.defaultSize={width:100,height:20},h.call(this,t),this.val={text:"comment"},this.sizeSet=!1,this.init()};e.inherits(o,h),o.prototype.setSize=function(t){this.size=t,this.sizeSet=!0,this.draw()},o.prototype.init=function(){this.draw()},o.prototype.draw=function(){this.sizeSet||(this.size=Math.sqrt(this.GUI.w*this.GUI.h/(2*this.val.text.length))),this.erase();var t=this.context;t.fillStyle=this.colors.fill,t.fillRect(0,0,this.GUI.w,this.GUI.h),t.fillStyle=this.colors.black,t.textAlign="left",t.font=this.size+"px 'Open Sans'",this.wrapText(this.val.text,6,3+this.size,this.GUI.w-6,this.size)}},{"../core/widget":3,util:51}],13:[function(t,i,s){var e=t("../utils/math"),h=t("util"),o=t("../core/widget"),n=i.exports=function(t){this.defaultSize={width:100,height:30},o.call(this,t),this.val={R:.75,L:.75},this.location=.5,this.init()};h.inherits(n,o),n.prototype.init=function(){this.draw()},n.prototype.draw=function(){this.erase(),this.location=Math.pow(this.val.R,2);var t=this.context;t.fillStyle=this.colors.fill,t.fillRect(0,0,this.GUI.w,this.GUI.h);var i=0,s=this.GUI.h,e=this.location*this.GUI.w;t.fillStyle=this.colors.accent,t.fillRect(e,i,this.GUI.w-e,s),t.textBaseline="middle",t.font=this.GUI.h/3+"px 'Open Sans'",t.fillStyle=this.colors.accent,t.textAlign="right",t.fillText(this.val.R.toFixed(2),e-2,this.GUI.h/4),t.fillStyle=this.colors.fill,t.textAlign="left",t.fillText(this.val.L.toFixed(2),e+2,.75*this.GUI.h),this.drawLabel()},n.prototype.click=function(){this.move()},n.prototype.move=function(){var t=e.clip(this.clickPos.x/this.GUI.w,0,1),i=1-t;this.location=t,this.val.R=e.prune(Math.sqrt(t),3),this.val.L=e.prune(Math.sqrt(i),3),this.draw(),this.transmit(this.val)}},{"../core/widget":3,"../utils/math":6,util:51}],14:[function(t,i,s){var e=t("../utils/math"),h=t("util"),o=t("../core/widget"),n=i.exports=function(t){this.defaultSize={width:100,height:100},o.call(this,t),this.circleSize,this.handleLength,this.val={value:0},this.responsivity=.004,this.aniStart=0,this.aniStop=1,this.aniMove=.01,this.lockResize=!0,null!=this.canvas.getAttribute("min")?this.min=parseFloat(this.canvas.getAttribute("min")):this.min=0,null!=this.canvas.getAttribute("max")?this.max=parseFloat(this.canvas.getAttribute("max")):this.max=1,null!=this.canvas.getAttribute("step")?this.step=parseFloat(this.canvas.getAttribute("step")):this.step=.001,this.maxdigits=3,this.calculateDigits=nx.calculateDigits,this.init()};h.inherits(n,o),n.prototype.init=function(){this.circleSize=Math.min(this.center.x,this.center.y),this.handleLength=this.circleSize,this.mindim=Math.min(this.GUI.w,this.GUI.h),this.mindim<101||this.mindim<101?this.accentWidth=1*this.lineWidth:this.accentWidth=2*this.lineWidth,this.draw()},n.prototype.draw=function(){var t=this.normalize(this.val.value),i=2*(t+.25)*Math.PI;this.erase();var s=this.context;s.lineCap="butt",s.beginPath(),s.lineWidth=this.circleSize/2,s.arc(this.center.x,this.center.y,this.circleSize-s.lineWidth/2,0*Math.PI,2*Math.PI,!1),s.strokeStyle=this.colors.fill,s.stroke(),s.closePath(),s.lineCap="butt",s.beginPath(),s.lineWidth=this.circleSize/2,s.arc(this.center.x,this.center.y,this.circleSize-s.lineWidth/2,.5*Math.PI,i,!1),s.strokeStyle=this.colors.accent,s.stroke(),s.closePath(),s.clearRect(this.center.x-this.GUI.w/40,this.center.y,this.GUI.w/20,this.GUI.h/2),t>0&&(s.beginPath(),s.lineWidth=1.5,s.moveTo(this.center.x-this.GUI.w/40,this.center.y+this.circleSize/2),s.lineTo(this.center.x-this.GUI.w/40,this.center.y+this.circleSize),s.strokeStyle=this.colors.accent,s.stroke(),s.closePath()),this.val.value=e.prune(this.rangify(t),3),this.digits=this.calculateDigits();var h=this.mindim/this.digits.total*.55;
if(h>7){var o=this.val.value.toFixed(this.digits.decimals);s.fillStyle=this.colors.borderhl,s.textAlign="center",s.textBaseline="middle",s.font=h+"px 'Open Sans'",s.fillText(o,this.GUI.w/2,this.GUI.h/2)}this.drawLabel()},n.prototype.click=function(t){this.val.value=e.prune(this.val.value,4),this.transmit(this.val),this.draw(),this.aniStart=this.val.value},n.prototype.move=function(){var t=this.normalize(this.val.value);t=e.clip(t-this.deltaMove.y*this.responsivity,0,1),this.val.value=e.prune(this.rangify(t),4),this.transmit(this.val),this.draw()},n.prototype.release=function(){this.aniStop=this.val.value},n.prototype.animate=function(t){switch(t){case"bounce":nx.aniItems.push(this.aniBounce.bind(this));break;case"none":nx.aniItems.splice(nx.aniItems.indexOf(this.aniBounce))}},n.prototype.aniBounce=function(){this.clicked||(this.val.value+=this.aniMove,this.aniStop<this.aniStart&&(this.stopPlaceholder=this.aniStop,this.aniStop=this.aniStart,this.aniStart=this.stopPlaceholder),this.aniMove=e.bounce(this.val.value,this.aniStart,this.aniStop,this.aniMove),this.draw(),this.val.value=e.prune(this.val.value,4),this.transmit(this.val))}},{"../core/widget":3,"../utils/math":6,util:51}],15:[function(t,i,s){var e=0,h=t("../utils/math"),o=t("util"),n=t("../core/widget"),l=i.exports=function(t){this.defaultSize={width:200,height:100},n.call(this,t),this.nodeSize=1,this.active=!1,this.duration=1e3,this.looping=!1,this.scanIndex=0,this.val={index:0,amp:0,points:[{x:.1,y:.4},{x:.35,y:.6},{x:.65,y:.2},{x:.9,y:.4}]},this.selectedNode=null,nx.aniItems.push(this.pulse.bind(this)),this.init()};o.inherits(l,n),l.prototype.init=function(){this.mindim=this.GUI.w<this.GUI.h?this.GUI.w:this.GUI.h,this.draw()},l.prototype.draw=function(){this.erase();var t=this.context;t.fillStyle=this.colors.fill,t.fillRect(0,0,this.GUI.w,this.GUI.h),t.fillStyle=this.colors.accent;var i=this.mindim/10,s=this.GUI.h-this.mindim/10;t.beginPath(),t.moveTo(i,s),t.arc(i,s,this.mindim/10,1.5*Math.PI,2*Math.PI*this.val.index+1.5*Math.PI,!1),t.fill(),t.closePath();for(var e=[],h=[],o=0;o<this.val.points.length;o++)e[o]=this.val.points[o].x*this.GUI.w,h[o]=(1-this.val.points[o].y)*this.GUI.h,e[o]<this.bgLeft+this.nodeSize?e[o]=this.bgLeft+this.nodeSize:e[o]>this.bgRight-this.nodeSize&&(e[o]=this.bgRight-this.nodeSize),h[o]<this.bgTop+this.nodeSize?h[o]=this.bgTop+this.nodeSize:h[o]>this.bgBottom-this.nodeSize&&(h[o]=this.bgBottom-this.nodeSize);for(var n=0;n<e.length;n++){var l=this.mindim/35+2;t.beginPath(),t.arc(e[n],h[n],l,0,2*Math.PI,!1),t.fillStyle=this.colors.accent,t.fill(),t.closePath()}t.beginPath(),t.strokeStyle=this.colors.accent,t.moveTo(-5,this.GUI.h),t.lineTo(-5,(1-this.val.points[0].y)*this.GUI.h);for(var n=0;n<e.length;n++)t.lineTo(e[n],h[n]);t.lineTo(this.GUI.w+5,(1-this.val.points[this.val.points.length-1].y)*this.GUI.h),t.lineTo(this.GUI.w+5,this.GUI.h),t.stroke(),t.globalAlpha=.2,t.fillStyle=this.colors.accent,t.fill(),t.globalAlpha=1,t.closePath(),this.drawLabel()},l.prototype.scaleNode=function(t){var i=t,s=0,e=this.GUI.w,o=this.val.points[i].x,n=this.GUI.h-this.val.points[i].y,l=h.clip(o/this.GUI.w,0,1),a=h.clip(n/this.GUI.h,0,1);this.val.points[i].x=h.prune(l,3),this.val.points[i].y=h.prune(a,3),i>0&&(s=this.val.points[i-1].x),this.val.points.length>i+1&&(e=this.val.points[i+1].x),this.val.points[i].x<s&&(this.val.points.splice(i-1,0,this.val.points.splice(i,1)[0]),i-=1,this.selectedNode=i),this.val.points[i].x>e&&(this.val.points.splice(i+1,0,this.val.points.splice(i,1)[0]),i+=1,this.selectedNode=i)},l.prototype.click=function(){this.selectedNode=this.findNearestNode(this.clickPos.x/this.GUI.w,this.clickPos.y/this.GUI.h,this.val.points),this.transmit(this.val),this.draw()},l.prototype.move=function(){this.clicked&&(this.val.points[this.selectedNode].x=this.clickPos.x,this.val.points[this.selectedNode].y=this.clickPos.y,this.scaleNode(this.selectedNode),this.transmit(this.val),this.draw())},l.prototype.release=function(){this.hasMoved||this.val.points.splice(this.selectedNode,1),this.draw(),this.selectedNode=null},l.prototype.pulse=function(){if(this.active){var t=(nx.context.currentTime-e)/(this.duration/1e3);if(t>=1&&(this.looping?(t-=1,e+=this.duration/1e3,this.val.index=0,this.scanIndex=0):this.stop()),this.val.index=t,this.val.index>this.val.points[this.val.points.length-1].x)this.val.amp=this.val.points[this.val.points.length-1].y;else if(this.val.index<this.val.points[0].x)this.val.amp=this.val.points[0].y;else{for(this.scanIndex=0;this.val.index>this.val.points[this.scanIndex].x;)this.scanIndex++;var i=this.val.points[this.scanIndex].x,s=this.val.points[this.scanIndex-1].x,o=this.val.points[this.scanIndex].y,n=this.val.points[this.scanIndex-1].y;this.val.amp=h.interp((this.val.index-s)/(i-s),n,o)}this.transmit(this.val),this.draw()}},l.prototype.start=function(){this.active=!0,this.val.index=0,e=nx.context.currentTime},l.prototype.stop=function(){this.active=!1,this.val.index=0,this.draw()},l.prototype.findNearestNode=function(t,i,s){var e=null,h=1e3,o=!1;i=1-i;for(var n=0;n<s.length;n++){var l=Math.sqrt(Math.pow(s[n].x-t,2),Math.pow(s[n].y- -i,2));h>l&&(h=l,e=n,o=t>s[n].x)}return h>.1&&(o&&e++,this.val.points.splice(e,0,{x:this.clickPos.x/this.GUI.w,y:(this.GUI.h-this.clickPos.y)/this.GUI.h})),e}},{"../core/widget":3,"../utils/math":6,util:51}],16:[function(t,i,s){var e=(t("../utils/math"),t("util")),h=t("../core/widget"),o=i.exports=function(t){this.defaultSize={width:100,height:50},h.call(this,t),this.recording=!1,this.playing=!1,this.maxLength=2e3,this.components=[],this.buffer=[],this.moment=0,this.needle=0,this.val={},this.rate=1,this.start=0,this.end=1,this.size=0,this.looping=!0,this.boundLog=this.log.bind(this),this.direction=1,this.noise=0,this.loopstart=0,this.loopend=0,this.mode="linear",this.init(),this.boundAdv=this.advance.bind(this),nx.aniItems.push(this.boundAdv)};e.inherits(o,h),o.prototype.init=function(){this.draw()},o.prototype.watch=function(){},o.prototype.connect=function(t){var i=this.components.length;this.components.push(t),t.tapeNum=i,t.isRecording=!0,t.recorder=this,this.buffer[i]={};for(var s in t.val)this.buffer[i][s]=[]},o.prototype.write=function(t,i){this.moment>=this.maxLength&&this.stop();for(var s in i)if(this.buffer[t][s])if("object"==typeof i[s])if(Array.isArray(i[s]))this.buffer[t][s][this.moment]=JSON.parse(JSON.stringify(i[s]));else{this.buffer[t][s][this.moment]={};for(var e in i[s])this.buffer[t][s][this.moment][e]=i[s][e]}else this.buffer[t][s][this.moment]=i[s];this.draw()},o.prototype.draw=function(){var t=this.context;t.fillStyle=this.colors.fill,t.fillRect(0,0,this.GUI.w,this.GUI.h);var i=this.GUI.w/4,s=this.GUI.w-i;if(this.recording?(t.illStyle="#e33",t.fillRect(.4*i,.4*i,1.2*i,1.2*i)):(t.fillStyle="#e33",t.beginPath(),t.arc(i,this.GUI.h/2,.8*i,0,2*Math.PI),t.fill(),t.closePath(),t.textAlign="center",t.textBaseline="middle",t.font="normal "+this.GUI.h/6+"px courier",t.fillStyle=this.colors.fill,t.fillText("rec",i,this.GUI.h/2)),this.playing){t.strokeStyle=this.colors.border,t.lineWidth=this.GUI.w/30,t.beginPath(),t.arc(s,this.GUI.h/2,.8*i,0,2*Math.PI),t.stroke(),t.closePath();var e=~~(this.needle/30);t.textAlign="center",t.textBaseline="middle",t.font="normal "+this.GUI.h/3+"px courier",t.fillStyle=this.colors.border,t.fillText(e,s,this.GUI.h/2+2)}else t.fillStyle=this.colors.border,t.beginPath(),t.arc(s,this.GUI.h/2,.8*i,0,2*Math.PI),t.fill(),t.closePath(),t.textAlign="center",t.textBaseline="middle",t.font="normal "+this.GUI.h/6+"px courier",t.fillStyle=this.colors.fill,t.fillText("play",s,this.GUI.h/2)},o.prototype.record=function(){if(!this.playing){this.components=[];for(var t in nx.widgets)this.connect(nx.widgets[t])}this.moment=0,nx.aniItems.push(this.boundLog),this.recording=!0},o.prototype.log=function(){for(var t=0;t<this.components.length;t++){this.components[t];this.write(this.components[t].tapeNum,this.components[t].val)}this.moment++},o.prototype.stop=function(){nx.removeAni(this.boundLog),this.size=this.moment,this.recording=!1,this.draw()},o.prototype.scan=function(t){this.pneedle=this.needle-this.direction,this.pneedle<=0?this.pneedle=this.size-1:this.pneedle>=this.size-1&&(this.pneedle=0);for(var i=0;i<this.components.length;i++){var s=this.components[i];for(var e in this.buffer[s.tapeNum])if(this.buffer[s.tapeNum][e]){var h={},o=this.buffer[s.tapeNum][e][~~this.needle+1]?this.buffer[s.tapeNum][e][~~this.needle+1]:this.buffer[s.tapeNum][e][~~this.needle];this.buffer[s.tapeNum][e][~~this.needle]!=this.buffer[s.tapeNum][e][~~this.pneedle]&&("number"==typeof this.buffer[s.tapeNum][e][~~this.needle]?(h[e]=nx.interp(this.needle-~~this.needle,this.buffer[s.tapeNum][e][~~this.needle],o),h[e]+=Math.random()*this.noise-this.noise/2,h[e]=nx.clip(h[e],0,1),s.set(h,!0)):(h[e]=this.buffer[s.tapeNum][e][~~this.needle],s.set(h,!0)))}}},o.prototype.play=function(t,i,s){t?this.rate=t:!1,i||this.start?(this.start=i?i:this.start,this.needle=this.start):(this.needle=this.moment-1,this.start=0),"linear"==this.mode&&(this.direction=1),s?this.end=s:this.end=1,this.playing=!0},o.prototype.pause=function(){this.playing=!1},o.prototype.loop=function(){},o.prototype.advance=function(){if(this.playing){if("linear"==this.mode||"bounce"==this.mode)this.needle+=this.rate*this.direction;else if("random"==this.mode)this.needle=nx.random((this.end-this.start)*this.size)+this.start*this.size;else if("wander"==this.mode){var t=3;this.needle>.75*this.size?t--:null,this.needle<.25*this.size?t++:null,this.needle+=this.rate*this.direction*(nx.random(t)-1)}this.needle/this.size<this.end&&this.needle/this.size>=this.start?this.scan():this.looping?"linear"==this.mode?this.needle=this.start*this.size:this.direction=-1*this.direction:this.playing=!1,this.draw()}},o.prototype.click=function(t){this.clickPos.x<this.GUI.w/2?this.recording?this.stop():(this.pause(),this.record()):(this.playing?this.pause():this.play(),this.draw())}},{"../core/widget":3,"../utils/math":6,util:51}],17:[function(t,i,s){var e=(t("../utils/math"),t("util")),h=t("../core/widget"),o=i.exports=function(t){this.defaultSize={width:100,height:50},h.call(this,t),this.recording=!1,this.playing=!1,this.maxLength=2e3,this.components=[],this.buffer=[],this.playbuffer=[],this.playIndex=0,this.playbufferSize=0,this.moment=0,this.needle=0,this.val={},this.rate=1,this.start=0,this.end=1,this.size=0,this.looping=!0,this.boundLog=this.log.bind(this),this.direction=1,this.noise=0,this.loopstart=0,this.loopend=0,this.mode="linear",this.init(),this.boundAdv=this.advance.bind(this),nx.aniItems.push(this.boundAdv)};e.inherits(o,h),o.prototype.init=function(){this.draw()},o.prototype.watch=function(){},o.prototype.connect=function(t){var i=this.components.length;this.components.push(t),t.tapeNum=i,t.isRecording=!0,t.recorder=this,this.buffer[i]={};for(var s in t.val)this.buffer[i][s]=[]},o.prototype.write=function(t,i){this.moment>=this.maxLength&&this.stop();for(var s in i)if(this.buffer[t][s])if("object"==typeof i[s])if(Array.isArray(i[s]))this.components[t].actuated?this.buffer[t][s][this.moment]=JSON.parse(JSON.stringify(i[s])):this.buffer[t][s][this.moment]=!1;else{this.buffer[t][s][this.moment]={};for(var e in i[s])this.components[t].actuated?this.buffer[t][s][this.moment][e]=i[s][e]:this.buffer[t][s][this.moment][e]=!1}else this.components[t].actuated?this.buffer[t][s][this.moment]=i[s]:this.buffer[t][s][this.moment]=!1;this.draw()},o.prototype.draw=function(){var t=this.context;t.fillStyle=this.colors.fill,t.fillRect(0,0,this.GUI.w,this.GUI.h);var i=this.GUI.w/4,s=this.GUI.w-i;if(this.recording?(t.fillStyle="#e33",t.fillRect(.4*i,.4*i,1.2*i,1.2*i)):(t.fillStyle="#e33",t.beginPath(),t.arc(i,this.GUI.h/2,.8*i,0,2*Math.PI),t.fill(),t.closePath(),t.textAlign="center",t.textBaseline="middle",t.font="normal "+this.GUI.h/6+"px courier",t.fillStyle=this.colors.fill,t.fillText("rec",i,this.GUI.h/2)),this.playing){t.strokeStyle=this.colors.border,t.lineWidth=this.GUI.w/30,t.beginPath(),t.arc(s,this.GUI.h/2,.8*i,0,2*Math.PI),t.stroke(),t.closePath();var e=~~(this.needle/30);t.textAlign="center",t.textBaseline="middle",t.font="normal "+this.GUI.h/3+"px courier",t.fillStyle=this.colors.border,t.fillText(e,s,this.GUI.h/2+2)}else t.fillStyle=this.colors.border,t.beginPath(),t.arc(s,this.GUI.h/2,.8*i,0,2*Math.PI),t.fill(),t.closePath(),t.textAlign="center",t.textBaseline="middle",t.font="normal "+this.GUI.h/6+"px courier",t.fillStyle=this.colors.fill,t.fillText("play",s,this.GUI.h/2)},o.prototype.record=function(){this.components=[];for(var t in nx.widgets)this.connect(nx.widgets[t]);this.moment=0,nx.aniItems.push(this.boundLog),this.recording=!0},o.prototype.log=function(){for(var t=0;t<this.components.length;t++){var i=this.components[t],s={};if(i.clicked)s=i.val,jest.nexttitle||(jest.nexttitle=i.canvasID);else for(var e in i.val)s[e]=!1;this.write(this.components[t].tapeNum,s)}this.moment++},o.prototype.stop=function(){nx.removeAni(this.boundLog),this.size=this.moment,this.recording=!1,this.draw()},o.prototype.scan=function(t){for(var i=0;i<this.components.length;i++){var s=this.components[i];for(var e in this.playbuffer[s.tapeNum])if(this.playbuffer[s.tapeNum][e]){var h={},o=this.playbuffer[s.tapeNum][e][~~this.needle+1]?this.playbuffer[s.tapeNum][e][~~this.needle+1]:this.playbuffer[s.tapeNum][e][~~this.needle];void 0!=this.playbuffer[s.tapeNum][e][~~this.needle-this.direction]&&this.playbuffer[s.tapeNum][e][~~this.needle]!==this.playbuffer[s.tapeNum][e][~~this.needle-this.direction]&&("number"==typeof this.playbuffer[s.tapeNum][e][~~this.needle]?(h[e]=nx.interp(this.needle-~~this.needle,this.playbuffer[s.tapeNum][e][~~this.needle],o),h[e]+=Math.random()*this.noise-this.noise/2,h[e]=nx.clip(h[e],0,1),s.set(h,!0)):(h[e]=this.playbuffer[s.tapeNum][e][~~this.needle],(h[e]||0===h[e])&&s.set(h,!0)))}}},o.prototype.play=function(t,i,s){t?this.rate=t:!1,i?(this.needle=this.moment-1,this.start=i):(this.needle=this.moment-1,this.start=0),"linear"==this.mode&&(this.direction=1),s?this.end=s:this.end=1,this.playing=!0},o.prototype.pause=function(){this.playing=!1},o.prototype.loop=function(){},o.prototype.advance=function(){if(this.playing){if("linear"==this.mode||"bounce"==this.mode)this.needle+=this.rate*this.direction;else if("random"==this.mode)this.needle=nx.random((this.end-this.start)*this.playbufferSize)+this.start*this.playbufferSize;else if("wander"==this.mode){var t=3;this.needle>.75*this.playbufferSize?t--:null,this.needle<.25*this.playbufferSize?t++:null,this.needle+=this.rate*this.direction*(nx.random(t)-1)}this.needle/this.playbufferSize<this.end&&this.needle/this.playbufferSize>this.start?this.scan():this.looping?"linear"==this.mode?(this.needle=0,this.next=this.jest.next(),this.playbuffer=this.next.buffer,this.playbufferSize=this.next.len):this.direction=-1*this.direction:this.playing=!1,this.draw(),this.jest.drawvis(this.needle/this.playbufferSize)}},o.prototype.click=function(t){this.clickPos.x<this.GUI.w/2?this.recording?this.stop():this.record():(this.playing?this.pause():this.play(),this.draw())}},{"../core/widget":3,"../utils/math":6,util:51}],18:[function(t,i,s){i.exports={banner:t("./banner"),button:t("./button"),colors:t("./colors"),comment:t("./comment"),crossfade:t("./crossfade"),dial:t("./dial"),envelope:t("./envelope"),ghost:t("./ghost"),ghostlist:t("./ghostlist"),joints:t("./joints"),keyboard:t("./keyboard"),matrix:t("./matrix"),message:t("./message"),meter:t("./meter"),metro:t("./metro"),metroball:t("./metroball"),motion:t("./motion"),mouse:t("./mouse"),multislider:t("./multislider"),multitouch:t("./multitouch"),number:t("./number"),panel:t("./panel"),position:t("./position"),range:t("./range"),select:t("./select"),slider:t("./slider"),string:t("./string"),tabs:t("./tabs"),text:t("./text"),tilt:t("./tilt"),toggle:t("./toggle"),trace:t("./trace"),typewriter:t("./typewriter"),vinyl:t("./vinyl"),waveform:t("./waveform"),wavegrain:t("./wavegrain"),windows:t("./windows")}},{"./banner":9,"./button":10,"./colors":11,"./comment":12,"./crossfade":13,"./dial":14,"./envelope":15,"./ghost":16,"./ghostlist":17,"./joints":19,"./keyboard":20,"./matrix":21,"./message":22,"./meter":23,"./metro":24,"./metroball":25,"./motion":26,"./mouse":27,"./multislider":28,"./multitouch":29,"./number":30,"./panel":31,"./position":32,"./range":33,"./select":34,"./slider":35,"./string":36,"./tabs":37,"./text":38,"./tilt":39,"./toggle":40,"./trace":41,"./typewriter":42,"./vinyl":43,"./waveform":44,"./wavegrain":45,"./windows":46}],19:[function(t,i,s){var e=t("../utils/math"),h=t("util"),o=t("../core/widget"),n=i.exports=function(t){this.defaultSize={width:150,height:150},o.call(this,t),this.nodeSize=this.GUI.w/14,this.values=[0,0],this.val={x:.35,y:.35,node1:0},this.joints=[{x:.1,y:.2},{x:.2,y:.1},{x:.3,y:.7},{x:.4,y:.4},{x:.5,y:.9},{x:.6,y:.15},{x:.7,y:.3},{x:.8,y:.8}],this.threshold=this.GUI.w/3};h.inherits(n,o),n.prototype.init=function(){this.nodeSize=this.GUI.w/14,this.threshold=this.GUI.w/3,this.draw()},n.prototype.draw=function(){this.erase(),this.drawingX=this.val.x*this.GUI.w,this.drawingY=this.val.y*this.GUI.h;var t=this.context;t.fillStyle=this.colors.fill,t.fillRect(0,0,this.GUI.w,this.GUI.h),null!=this.val.x?this.drawNode():(t.fillStyle=this.colors.border,t.font="14px courier",t.fillText(this.default_text,10,20)),t.fillStyle=this.colors.accent,t.strokeStyle=this.colors.border;for(var i in this.joints){t.beginPath(),t.arc(this.joints[i].x*this.GUI.w,this.joints[i].y*this.GUI.h,this.nodeSize/2,0,2*Math.PI,!0),t.fill(),t.closePath();var s=Math.abs(this.joints[i].x*this.GUI.w-this.drawingX),h=Math.abs(this.joints[i].y*this.GUI.h-this.drawingY),o=s+h;if(o<this.threshold){t.beginPath(),t.moveTo(this.joints[i].x*this.GUI.w,this.joints[i].y*this.GUI.h),t.lineTo(this.drawingX,this.drawingY),t.strokeStyle=this.colors.accent,t.lineWidth=e.scale(o,0,this.threshold,this.nodeSize/2,5),t.stroke(),t.closePath();var n=e.scale(o,0,this.threshold,1,0);this.val["node"+i]=n}}this.drawLabel()},n.prototype.drawNode=function(){this.drawingX<this.nodeSize?this.drawingX=this.nodeSize:this.drawingX>this.GUI.w-this.nodeSize&&(this.drawingX=this.GUI.w-this.nodeSize),this.drawingY<this.nodeSize?this.drawingY=this.nodeSize:this.drawingY>this.GUI.h-this.nodeSize&&(this.drawingY=this.GUI.h-this.nodeSize);var t=this.context;t.globalAlpha=1,t.beginPath(),t.fillStyle=this.colors.accent,t.strokeStyle=this.colors.border,t.lineWidth=this.lineWidth,t.arc(this.drawingX,this.drawingY,this.nodeSize,0,2*Math.PI,!0),t.fill(),t.closePath()},n.prototype.click=function(){this.val={},this.val.x=this.clickPos.x/this.GUI.w,this.val.y=this.clickPos.y/this.GUI.h,this.draw(),this.transmit(this.val),this.connections=[]},n.prototype.move=function(){this.val={},this.clicked&&(this.val.x=this.clickPos.x/this.GUI.w,this.val.y=this.clickPos.y/this.GUI.h,this.draw(),this.transmit(this.val),this.connections=[])},n.prototype.release=function(){this.anix=this.deltaMove.x/this.GUI.w,this.aniy=this.deltaMove.y/this.GUI.h},n.prototype.animate=function(t){switch(t){case"bounce":nx.aniItems.push(this.aniBounce.bind(this));break;case"none":nx.aniItems.splice(nx.aniItems.indexOf(this.aniBounce))}},n.prototype.anix=0,n.prototype.aniy=0,n.prototype.aniBounce=function(){!this.clicked&&this.val.x&&(this.val.x+=this.anix,this.val.y+=this.aniy,this.anix=e.bounce(this.val.x,.1,.9,this.anix),this.aniy=e.bounce(this.val.y,.1,.9,this.aniy),this.draw(),this.transmit(this.val))}},{"../core/widget":3,"../utils/math":6,util:51}],20:[function(t,i,s){var e=t("util"),h=t("../core/widget"),o=t("../utils/drawing"),n=t("../utils/math"),l=i.exports=function(t){this.defaultSize={width:300,height:75},h.call(this,t),this.octaves=3,this.white={width:0,height:0},this.black={width:0,height:0},this.wkeys=[],this.bkeys=[],this.keypattern=["w","b","w","b","w","w","b","w","b","w","b","w"],this.keys=[],this.midibase=48,this.lineWidth=1,this.fingers=[{key:-1,pkey:-1}],this.multitouch=!1,this.oneleft=!1,this.mode="button",this.val={on:0,note:0,midi:"0 0"},this.init()};e.inherits(l,h),l.prototype.init=function(){this.white={width:0,height:0},this.black={width:0,height:0},this.wkeys=[],this.bkeys=[],this.keys=[],this.white.num=0;for(var t=0;t<this.keypattern.length;t++)"w"==this.keypattern[t]?this.white.num++:null;this.white.num*=this.octaves,this.white.width=this.GUI.w/this.white.num,this.white.height=this.GUI.h,this.black.width=.6*this.white.width,this.black.height=.6*this.GUI.h;for(var t=0;t<this.keypattern.length*this.octaves;t++)switch(this.keys[t]={note:t+this.midibase,on:!1},this.keypattern[t%this.keypattern.length]){case"w":this.keys[t].x=this.wkeys.length*this.white.width,this.keys[t].y=0,this.keys[t].w=this.white.width,this.keys[t].h=this.white.height,this.keys[t].type="w",this.keys[t].index=t,this.wkeys.push(this.keys[t]);break;case"b":this.keys[t].x=this.wkeys.length*this.white.width-this.black.width/2,this.keys[t].y=0,this.keys[t].w=this.black.width,this.keys[t].h=this.black.height,this.keys[t].type="b",this.keys[t].index=t,this.bkeys.push(this.keys[t])}this.draw()},l.prototype.draw=function(){var t=this.context;t.strokeStyle=this.colors.borderhl,t.lineWidth=1;for(var i in this.wkeys)t.fillStyle=this.wkeys[i].on?this.colors.borderhl:this.colors.fill,t.strokeRect(this.wkeys[i].x,0,this.white.width,this.white.height),t.fillRect(this.wkeys[i].x,0,this.white.width,this.white.height);for(var i in this.bkeys)t.fillStyle=this.bkeys[i].on?this.colors.borderhl:this.colors.black,t.fillRect(this.bkeys[i].x,0,this.black.width,this.black.height);this.drawLabel()},l.prototype.toggle=function(t,i){if("button"==this.mode){if(t){i||i===!1?t.on=i:t.on=!t.on;var s=t.on?1:0,e=128*n.invert(this.clickPos.y/this.GUI.h);e=n.prune(n.clip(e,5,128),0),this.val={on:s*e,note:t.note,midi:t.note+" "+s},this.transmit(this.val),this.draw()}}else if("sustain"==this.mode&&t){i?t.on=i:t.on=!t.on;var s=t.on?1:0,e=128*n.invert(this.clickPos.y/this.GUI.h);e=n.prune(n.clip(e,5,128),0),this.val={on:s*e,note:t.note,midi:t.note+" "+s},this.transmit(this.val),this.draw()}},l.prototype.whichKey=function(t,i){for(var s in this.bkeys)if(o.isInside({x:t,y:i},this.bkeys[s]))return this.bkeys[s];var e=~~(t/this.white.width);return e>=this.wkeys.length&&(e=this.wkeys.length-1),0>e&&(e=0),this.wkeys[e]},l.prototype.click=function(t){if(this.clickPos.touches.length>1||this.multitouch){this.multitouch=!0,this.clickPos.touches.length>=2&&this.oneleft&&(this.oneleft=!1),this.keysinuse=[];for(var i=0;i<this.clickPos.touches.length;i++)this.fingers[i]={key:this.whichKey(this.clickPos.touches[i].x,this.clickPos.touches[i].y)},this.fingers[i].key.on||this.toggle(this.fingers[i].key,!0),this.keysinuse.push(this.fingers[i].key.index);for(var i=0;i<this.keys.length;i++)this.keys[i].on&&this.keysinuse.indexOf(this.keys[i].index)<0&&this.toggle(this.keys[i],!1)}else this.fingers[0].pkey=this.fingers[0].key,this.fingers[0].key=this.whichKey(this.clickPos.x,this.clickPos.y),this.toggle(this.fingers[0].key)},l.prototype.move=function(t){if(this.clickPos.touches.length>1||this.multitouch){this.keysinuse=[];for(var i=0;i<this.clickPos.touches.length;i++)this.fingers[i]={key:this.whichKey(this.clickPos.touches[i].x,this.clickPos.touches[i].y)},this.fingers[i].key.on||this.toggle(this.fingers[i].key,!0),this.keysinuse.push(this.fingers[i].key.index);for(var i=0;i<this.keys.length;i++)this.keys[i].on&&this.keysinuse.indexOf(this.keys[i].index)<0&&this.toggle(this.keys[i],!1)}else this.fingers[0].pkey=this.fingers[0].key,this.fingers[0].key=this.whichKey(this.clickPos.x,this.clickPos.y),this.fingers[0].key&&this.fingers[0].key.index!=this.fingers[0].pkey.index&&(this.toggle(this.fingers[0].pkey,!1),this.toggle(this.fingers[0].key,!0))},l.prototype.release=function(t){if(this.clickPos.touches.length>1||this.multitouch){this.keysinuse=[];for(var i=0;i<this.clickPos.touches.length&&(!this.oneleft||1!=this.clickPos.touches.length);i++)this.fingers[i]={key:this.whichKey(this.clickPos.touches[i].x,this.clickPos.touches[i].y)},this.keysinuse.push(this.fingers[i].key.index);for(var i=0;i<this.keys.length;i++)this.keys[i].on&&this.keysinuse.indexOf(this.keys[i].index)<0&&this.toggle(this.keys[i],!1);1==this.clickPos.touches.length&&(this.oneleft=!0)}else"button"==this.mode&&this.toggle(this.fingers[0].key,!1)}},{"../core/widget":3,"../utils/drawing":5,"../utils/math":6,util:51}],21:[function(t,i,s){var e=t("../utils/math"),h=t("util"),o=t("../core/widget"),n=i.exports=function(t){this.defaultSize={width:100,height:100},o.call(this,t),this.row=4,this.col=4,this.cellHgt,this.cellWid,this.matrix,this.val={row:0,col:0,level:0,list:[]},this.cur,this.prev,this.erasing=!1,this.place=null,this.starttime,this.lastbeat,this.thisframe=0,this.lastframe=0,this.context.lineWidth=1,this.sequencing=!1,this.cellBuffer=4,this.sequenceMode="linear",this.bpm=120,this.pbpm=this.bpm,this.starttime=nx.starttime,this.init()};h.inherits(n,o),n.prototype.init=function(){this.pmatrix=this.matrix?this.matrix:!1,this.matrix=null,this.matrix=new Array(this.col);for(var t=0;t<this.col;t++){this.matrix[t]=new Array(this.row);for(var i=0;i<this.row;i++)this.matrix[t][i]=this.pmatrix&&this.pmatrix[t]?this.pmatrix[t][i]:0}this.draw(),this.life=this.unboundlife.bind(this)},n.prototype.draw=function(){this.erase(),this.cellWid=this.GUI.w/this.col,this.cellHgt=this.GUI.h/this.row;var t=this.context;t.strokeStyle=this.colors.fill;for(var i=0;i<this.row;i++)for(var s=0;s<this.col;s++){var e=s*this.cellWid;0==s?e+=0:null;var h=i*this.cellHgt;0==i?h+=0:null;var o=this.cellWid,n=this.cellHgt;t.strokeStyle=this.colors.border,t.lineWidth=this.cellBuffer,this.matrix[s][i]>0?t.fillStyle=this.colors.accent:t.fillStyle=this.colors.fill,t.fillRect(e+this.cellBuffer/2,h+this.cellBuffer/2,o-this.cellBuffer,n-this.cellBuffer),this.place==s&&(t.globalAlpha=.4,t.fillStyle=this.colors.border,t.fillRect(e,h,o,n),t.globalAlpha=1)}this.drawLabel()},n.prototype.click=function(t){this.cur={col:~~(this.clickPos.x/this.cellWid),row:~~(this.clickPos.y/this.cellHgt)},this.matrix[this.cur.col][this.cur.row]?(this.matrix[this.cur.col][this.cur.row]=0,this.erasing=!0):(this.matrix[this.cur.col][this.cur.row]=1,this.erasing=!1),this.cur.value=this.matrix[this.cur.col][this.cur.row],this.prev=this.cur,this.val={row:this.cur.row,col:this.cur.col,level:this.cur.value},this.transmit(this.val),this.draw()},n.prototype.move=function(t){this.clicked&&(this.cur={col:~~(this.clickPos.x/this.cellWid),row:~~(this.clickPos.y/this.cellHgt)},this.cur.row<this.row&&this.cur.col<this.col&&this.cur.row>=0&&this.cur.col>=0&&(this.cur.col!=this.prev.col||this.cur.row!=this.prev.row)&&(this.erasing?this.matrix[this.cur.col][this.cur.row]=0:this.matrix[this.cur.col][this.cur.row]=1,this.cur.value=this.matrix[this.cur.col][this.cur.row],this.prev=this.cur,this.val={row:this.cur.row,col:this.cur.col,level:this.cur.value},this.transmit(this.val),this.draw()))},n.prototype.setCell=function(t,i,s){var e=s?1:0;this.matrix[t][i]=e,this.val={row:i,col:t,level:e},this.transmit(this.val),this.draw()},n.prototype.sequence=function(t){t&&(this.bpm=t),this.sequencing=!0,requestAnimationFrame(this.seqStep.bind(this))},n.prototype.setBPM=function(t){this.bpm=t},n.prototype.stop=function(){this.sequencing=!1},n.prototype.seqStep=function(){0==this.bpm&&(this.bpm=1);var t=(new Date).getTime(),i=t-this.starttime;if(this.bpm!=this.pbpm){var s=i/(6e4/this.pbpm);i=s*(6e4/this.bpm),this.starttime=t-i,this.thisframe=~~(i/(6e4/this.bpm))}else this.thisframe=~~(i/(6e4/this.bpm));this.pbpm=this.bpm,this.thisframe!=this.lastframe&&(this.lastbeat=t,"linear"==this.sequenceMode?this.place++:"random"==this.sequenceMode&&(this.place=e.random(this.col)),this.place>=this.col&&(this.place=0),null==this.place&&(this.place=0),this.jumpToCol(this.place)),this.lastframe=this.thisframe,this.sequencing&&requestAnimationFrame(this.seqStep.bind(this))},n.prototype.jumpToCol=function(t){this.place=t,this.val={list:this.matrix[this.place]},this.transmit(this.val),this.draw()},n.prototype.customDestroy=function(){this.stop()},n.prototype.unboundlife=function(){if(!this.clicked){this.newmatrix=[];for(var t=0;t<this.col;t++){this.newmatrix[t]=[];for(var i=0;i<this.row;i++){var s=0;t-1>=0&&(s+=this.matrix[t-1][i-1]?this.matrix[t-1][i-1]:0,s+=this.matrix[t-1][i]?this.matrix[t-1][i]:0,s+=this.matrix[t-1][i+1]?this.matrix[t-1][i+1]:0),s+=this.matrix[t][i-1]?this.matrix[t][i-1]:0,s+=this.matrix[t][i+1]?this.matrix[t][i+1]:0,t+1<this.col&&(s+=this.matrix[t+1][i-1]?this.matrix[t+1][i-1]:0,s+=this.matrix[t+1][i]?this.matrix[t+1][i]:0,s+=this.matrix[t+1][i+1]?this.matrix[t+1][i+1]:0),this.matrix[t][i]?2>s?this.newmatrix[t][i]=0:2==s||3==s?this.newmatrix[t][i]=1:s>3&&(this.newmatrix[t][i]=0):this.matrix[t][i]||3!=s?this.newmatrix[t][i]=this.matrix[t][i]:this.newmatrix[t][i]=1}}this.matrix=this.newmatrix}this.transmit({grid:this.matrix}),this.draw()},n.prototype.life=function(){return!1}},{"../core/widget":3,"../utils/math":6,util:51}],22:[function(t,i,s){var e=t("util"),h=t("../core/widget"),o=i.exports=function(t){this.defaultSize={width:100,height:30},h.call(this,t),this.val={value:"send a message"},this.size=14};e.inherits(o,h),o.prototype.init=function(){this.canvas.getAttribute("label")&&(this.val.value=this.canvas.getAttribute("label")),this.draw()},o.prototype.draw=function(){this.erase();var t=this.context;this.clicked?t.fillStyle=this.colors.border:t.fillStyle=this.colors.fill,t.fillRect(0,0,this.GUI.w,this.GUI.h),this.clicked?t.fillStyle=this.colors.black:t.fillStyle=this.colors.black,t.textAlign="left",t.font=this.size+"px "+nx.font,this.wrapText(this.val.value,5,1+this.size,this.GUI.w-6,this.size)},o.prototype.click=function(t){this.draw(),this.transmit(this.val)},o.prototype.release=function(t){this.draw()}},{"../core/widget":3,util:51}],23:[function(t,i,s){var e=t("util"),h=(t("../utils/drawing"),t("../core/widget")),o=i.exports=function(t){this.defaultSize={width:20,height:50},h.call(this,t),this.val={level:0},this.dataArray,this.bars=8,this.init()};e.inherits(o,h),o.prototype.init=function(){this.bar={x:0,y:0,w:this.GUI.w,h:this.GUI.h/this.bars};var t=this.context;t.fillStyle=this.colors.fill,t.fillRect(0,0,this.GUI.w,this.GUI.h)},o.prototype.setup=function(t,i){this.actx=t,this.source=i,this.analyser=this.actx.createAnalyser(),this.analyser.smoothingTimeConstant=.85,this.analyser.fftsize=1024,this.bufferLength=this.analyser.frequencyBinCount,this.dataArray=new Uint8Array(this.bufferLength),this.source.connect(this.analyser),this.draw()},o.prototype.draw=function(){if(this.dataArray){this.analyser.getByteTimeDomainData(this.dataArray);var t=Math.max.apply(null,this.dataArray),i=Math.min.apply(null,this.dataArray),s=t-i;s/=240;var e=20*(Math.log(s)/Math.log(10)),h=this.context;h.fillStyle=this.colors.fill,h.fillRect(0,0,this.GUI.w,this.GUI.h);for(var o=Math.floor((e+40)/(50/this.bars)),n=0;n<this.bars;n++)n>=.8*this.bars?h.fillStyle="rgb(255,0,0)":n<.8*this.bars&&n>=.69*this.bars?h.fillStyle="rgb(255,255,0)":n<.69*this.bars&&(h.fillStyle="rgb(0,255,0)"),o>n&&h.fillRect(1,this.GUI.h-this.bar.h*n,this.GUI.w-2,this.bar.h-2)}setTimeout(function(){window.requestAnimationFrame(this.draw.bind(this))}.bind(this),80)}},{"../core/widget":3,"../utils/drawing":5,util:51}],24:[function(t,i,s){var e=t("../utils/math"),h=t("util"),o=t("../core/widget"),n=i.exports=function(t){this.defaultSize={width:100,height:20},o.call(this,t),this.val={beat:0},this.x=10,this.y=10,this.loc=10,this.nodeSize=10,this.speed=1,this.direction=1,this.orientation="horizontal",this.boundary=this.GUI.w,nx.aniItems.push(this.advance.bind(this)),this.active=!0,this.init()};h.inherits(n,o),n.prototype.init=function(){this.nodeSize=Math.min(this.GUI.w,this.GUI.h)/2,this.GUI.w<this.GUI.h?(this.orientation="vertical",this.boundary=this.GUI.h):(this.orientation="horizontal",this.boundary=this.GUI.w),this.x=this.nodeSize,this.y=this.nodeSize,this.loc=this.nodeSize,this.draw()},n.prototype.draw=function(){this.erase();var t=this.context;t.fillStyle=this.colors.fill,t.fillRect(0,0,this.GUI.w,this.GUI.h),
t.beginPath(),t.fillStyle=this.colors.accent,t.arc(this.x,this.y,this.nodeSize,0,2*Math.PI,!0),t.fill(),t.closePath(),this.drawLabel()},n.prototype.click=function(){},n.prototype.move=function(){this.clicked&&(this.speed-=this.deltaMove.y/50)},n.prototype.release=function(){},n.prototype.advance=function(){this.speed>=0?this.loc+=this.speed*this.direction:this.loc+=this.speed*this.direction,(this.loc-this.nodeSize<0||this.loc+this.nodeSize>this.boundary)&&(this.val.beat=e.scale(this.direction,-1,1,0,1),this.transmit(this.val),this.direction*=-1),"vertical"==this.orientation?this.y=this.loc:this.x=this.loc,this.draw()},n.prototype.customDestroy=function(){nx.removeAni(this.advance.bind(this))}},{"../core/widget":3,"../utils/math":6,util:51}],25:[function(t,i,s){var e=t("../utils/math"),h=(t("../utils/drawing"),t("util")),o=t("../core/widget"),n=i.exports=function(t){this.defaultSize={width:300,height:200},o.call(this,t),this.CurrentBalls=[],this.ballpos={},this.clickField=null,this.globalMetro,this.tempo=1,this.tempoMarker=150,this.quantize=!1,this.tiltLR,this.tiltFB,this.z,this.val={x:!1,side:!1,ball:!1,all:!1},nx.aniItems.push(this.metro.bind(this)),this.init()};h.inherits(n,o),n.prototype.init=function(){this.draw()},n.prototype.metro=function(){var t=this.context;t.clearRect(0,0,this.GUI.w,this.GUI.h),this.drawSpaces(),this.drawBalls(),this.drawLabel()},n.prototype.drawSpaces=function(){var t=this.context;t.fillStyle=this.colors.fill,t.fillRect(0,0,this.GUI.w,this.GUI.h),t.fillStyle=this.colors.border,t.fillRect(0,0,this.GUI.w,this.GUI.h/4),t.font="normal "+this.GUI.h/8+"px "+nx.font,t.textAlign="center",t.textBaseline="middle",t.fillText("add",this.GUI.w/2,this.GUI.h/1.66),t.fillStyle=this.colors.fill,t.fillText("delete",this.GUI.w/2,this.GUI.h/8)},n.prototype.drawBalls=function(){for(var t=0;t<this.CurrentBalls.length;t++)this.CurrentBalls[t].move(),this.CurrentBalls[t].draw()},n.prototype.click=function(t){this.ballpos=this.clickPos,this.clickPos.y<this.GUI.h/4?this.deleteMB(this.ballpos):this.addNewMB(this.ballpos)},n.prototype.move=function(t){this.ballpos=this.clickPos,this.clickPos.y<this.GUI.h/4?this.deleteMB(this.ballpos):this.addNewMB(this.ballpos)},n.prototype.release=function(t){this.clickField=null},n.prototype.deleteMB=function(t){for(var i=this.CurrentBalls.length-1;i>=0;i--)Math.abs(this.CurrentBalls[i].xpos-t.x)<10&&this.CurrentBalls[i].kill();for(var i=0;i<this.CurrentBalls.length;i++)this.CurrentBalls[i].thisIndex=i},n.prototype.addNewMB=function(t){var i=this.CurrentBalls.length;this.CurrentBalls[i]=new this.Ball(i,t.x,t.y,this)},n.prototype.toggleQuantization=function(){this.quantize?this.quantize=!1:this.quantize=!0},n.prototype.tilt=function(t){var i=e.prune(this.tiltLR/90,3),s=e.prune(this.tiltFB/90,3);e.prune(this.z,3);tilt=10*i,this.tempo=Math.pow(s+1,3)},n.prototype.Ball=function(t,i,s,h){this.thisIndex=t,this.color=h.colors.accent,this.space={ypos1:0,ypos2:h.height,xpos1:0,xpos2:h.width,hgt:h.height,wid:h.width},this.xpos=i,this.ypos=s,this.size=10,this.direction=1,this.speed=(h.height-this.ypos)/20,this.speedQ=5,this.quantize&&(this.ypos=h.height-13),this.move=function(){this.quantize?this.ypos=this.ypos+this.speedQ*this.direction*h.tempo:this.ypos=this.ypos+this.speed*this.direction*h.tempo,(this.ypos>h.height-this.size-2||this.ypos<this.size+2)&&this.bounce(),this.ypos<this.space.ypos+this.size?this.ypos=this.space.ypos+this.size+5:this.ypos>this.space.ypos+this.space.hgt-this.size&&(this.ypos=this.space.ypos+this.space.hgt-this.size-5),this.xpos<this.space.xpos?this.xpos=this.space.xpos2:this.xpos>this.space.xpos2&&(this.xpos=this.space.xpos)},this.bounce=function(){this.direction/2+1;this.bounceside=(this.direction+1)/2,this.direction=-1*this.direction;var t=e.prune(this.xpos/this.space.wid,3);this.val={x:t,side:this.bounceside,ball:this.thisIndex,all:t+" "+this.bounceside+" "+this.thisIndex},h.transmit(this.val)},this.kill=function(){h.CurrentBalls.splice(this.thisIndex,1)},this.draw=function(){var t=this.context;t.beginPath(),t.fillStyle=this.color,1==this.direction?(this.radius=this.size*Math.abs((this.ypos-this.space.ypos-this.space.hgt/2)/(this.space.hgt-this.space.ypos)*2),this.radius=this.radius/2+this.size/2,this.radius=this.size,this.radius=this.speed,this.radius=Math.abs(15-this.speed)):(this.radius=this.size*Math.abs(2-Math.abs((this.ypos-this.space.ypos-this.space.hgt/2)/(this.space.hgt-this.space.ypos)*2)),this.radius=this.radius/2+this.size/2,this.radius=this.size,this.radius=Math.abs(15-this.speed)),t.arc(this.xpos,this.ypos,this.radius,0,2*Math.PI,!0),t.fill()}}},{"../core/widget":3,"../utils/drawing":5,"../utils/math":6,util:51}],26:[function(t,i,s){var e=t("../utils/math"),h=t("util"),o=t("../core/widget"),n=i.exports=function(t){this.defaultSize={width:75,height:75},o.call(this,t),this.motionLR,this.motionFB,this.z,this.active=!0,this.px=0,this.py=0,this.pz=0,this.val={x:0,y:0,z:0},this.text="Motion",this.init(),this.boundMotion=this.motionlistener.bind(this),window.DeviceMotionEvent?window.addEventListener("devicemotion",this.boundMotion,!1):(this.context.fillText("incompatible",0,0),this.active=!1)};h.inherits(n,o),n.prototype.deviceMotionHandler=function(){this.val={x:e.prune(this.motionLR/10,4),y:e.prune(this.motionFB/10,4),z:e.prune(this.z/10,4)},this.transmit(this.val)},n.prototype.motionlistener=function(t){var i=t.acceleration;if(this.active&&(this.motionLR=nx.lp(this.canvasID+"motionx",i.x,20),this.motionFB=nx.lp(this.canvasID+"motiony",i.y,20),this.z=nx.lp(this.canvasID+"motionz",i.z,20),this.deviceMotionHandler(),this.draw(),null===i.x||void 0===i.x)){this.erase();var s=this.context;s.fillStyle=this.colors.fill,s.fillRect(0,0,this.GUI.w,this.GUI.h),s.fillStyle=this.colors.black,s.font="12px courier",s.textAlign="center",s.fillText("no data",this.GUI.w/2,this.GUI.h/2),this.active=!1}},n.prototype.init=function(){this.draw()},n.prototype.draw=function(){this.erase();var t=this.context;t.fillStyle=this.colors.fill,t.fillRect(0,0,this.GUI.w,this.GUI.h),t.fillStyle=this.colors.accent;var i=Math.PI/4;this.motionFB<0?(t.beginPath(),t.moveTo(this.GUI.w/2,this.GUI.h/2),t.arc(this.GUI.w/2,this.GUI.h/2,this.GUI.w/2,5*i,7*i,!1),t.globalAlpha=Math.pow(this.motionFB,2),t.fill(),t.closePath()):(t.beginPath(),t.moveTo(this.GUI.w/2,this.GUI.h/2),t.arc(this.GUI.w/2,this.GUI.h/2,this.GUI.w/2,1*i,3*i,!1),t.globalAlpha=Math.pow(this.motionFB,2),t.fill(),t.closePath()),this.motionLR<0?(t.beginPath(),t.moveTo(this.GUI.w/2,this.GUI.h/2),t.arc(this.GUI.w/2,this.GUI.h/2,this.GUI.w/2,7*i,1*i,!1),t.globalAlpha=Math.pow(this.motionLR,2),t.fill(),t.closePath()):(t.beginPath(),t.moveTo(this.GUI.w/2,this.GUI.h/2),t.arc(this.GUI.w/2,this.GUI.h/2,this.GUI.w/2,3*i,5*i,!1),t.globalAlpha=Math.pow(this.motionLR,2),t.fill(),t.closePath()),t.beginPath(),t.moveTo(this.GUI.w/2,this.GUI.h/2),t.arc(this.GUI.w/2,this.GUI.h/2,this.GUI.w/6,0,2*Math.PI,!1),t.globalAlpha=Math.pow(this.z,2),t.fill(),t.closePath(),t.globalAlpha=1,this.drawLabel()},n.prototype.click=function(){this.active=!this.active,this.draw()},n.prototype.customDestroy=function(){this.active=!1,window.removeEventListener("devicemotion",this.motionlistener,!1)}},{"../core/widget":3,"../utils/math":6,util:51}],27:[function(t,i,s){var e=t("util"),h=t("../core/widget"),o=t("../utils/math"),n=i.exports=function(t){this.defaultSize={width:98,height:100},h.call(this,t),this.val={x:0,y:0,deltax:0,deltay:0},this.inside={},this.boundmove=this.preMove.bind(this),this.mousing=window.addEventListener("mousemove",this.boundmove,!1),this.init()};e.inherits(n,h),n.prototype.init=function(){this.inside.height=this.GUI.h,this.inside.width=this.GUI.w,this.inside.left=0,this.inside.top=0,this.inside.quarterwid=this.inside.width/4,this.draw()},n.prototype.draw=function(){this.erase();var t=this.context;t.fillStyle=this.colors.fill,t.fillRect(0,0,this.GUI.w,this.GUI.h);var i=-this.val.x*this.GUI.h,s=-this.val.y*this.GUI.h,e=-this.val.deltax*this.GUI.h-this.GUI.h/2,h=-this.val.deltay*this.GUI.h-this.GUI.h/2;t.fillStyle=this.colors.accent,t.fillRect(this.inside.left,this.inside.height,this.inside.quarterwid,i),t.fillRect(this.inside.quarterwid,this.inside.height,this.inside.quarterwid,s),t.fillRect(2*this.inside.quarterwid,this.inside.height,this.inside.quarterwid,e),t.fillRect(3*this.inside.quarterwid,this.inside.height,this.inside.quarterwid,h),t.globalAlpha=1,t.fillStyle=this.colors.fill,t.textAlign="center",t.font=this.GUI.w/7+"px "+this.font,t.globalAlpha=1,this.drawLabel()},n.prototype.move=function(t){this.val={deltax:t.clientX/window.innerWidth-this.val.x,deltay:o.invert(t.clientY/window.innerHeight)-this.val.y,x:t.clientX/window.innerWidth,y:o.invert(t.clientY/window.innerHeight)},this.draw(),this.transmit(this.val)},n.prototype.customDestroy=function(){window.removeEventListener("mousemove",this.boundmove,!1)}},{"../core/widget":3,"../utils/math":6,util:51}],28:[function(t,i,s){var e=t("../utils/math"),h=t("util"),o=t("../core/widget"),n=i.exports=function(t){this.defaultSize={width:100,height:75},o.call(this,t),this.sliders=15,this.sliderClicked=0,this.oldSliderToMove,this.init()};h.inherits(n,o),n.prototype.init=function(){this.val=[];for(var t=0;t<this.sliders;t++)this.val[t]=.7;this.realSpace={x:this.GUI.w,y:this.GUI.h},this.sliderWidth=this.realSpace.x/this.sliders,this.draw()},n.prototype.draw=function(){this.erase();var t=this.context;t.fillStyle=this.colors.fill,t.fillRect(0,0,this.GUI.w,this.GUI.h),t.strokeStyle=this.colors.accent,t.fillStyle=this.colors.accent,t.lineWidth=5;for(var i=0;i<this.sliders;i++)t.beginPath(),t.moveTo(i*this.sliderWidth,this.GUI.h-this.val[i]*this.GUI.h),t.lineTo(i*this.sliderWidth+this.sliderWidth,this.GUI.h-this.val[i]*this.GUI.h),t.stroke(),t.lineTo(i*this.sliderWidth+this.sliderWidth,this.GUI.h),t.lineTo(i*this.sliderWidth,this.GUI.h),t.globalAlpha=.3-i%3*.1,t.fill(),t.closePath(),t.globalAlpha=1;this.drawLabel()},n.prototype.click=function(){this.oldSliderToMove=!1,this.move(!0)},n.prototype.move=function(t){if(this.clicked){if(this.clickPos.touches.length>1)for(var i=0;i<this.clickPos.touches.length;i++){var s=Math.floor(this.clickPos.touches[i].x/this.sliderWidth);s=e.clip(s,0,this.sliders-1),this.val[s]=e.clip(e.invert(this.clickPos.touches[i].y/this.GUI.h),0,1)}else{var s=Math.floor(this.clickPos.x/this.sliderWidth);if(s=e.clip(s,0,this.sliders-1),this.val[s]=e.clip(e.invert(this.clickPos.y/this.GUI.h),0,1),this.oldSliderToMove&&this.oldSliderToMove>s+1)for(var h=this.oldSliderToMove-s-1,i=1;h>=i;i++)this.val[s+i]=this.val[s]+(this.val[this.oldSliderToMove]-this.val[s])*(i/(h+1));else if(this.oldSliderToMove&&s>this.oldSliderToMove+1)for(var h=s-this.oldSliderToMove-1,i=1;h>=i;i++)this.val[this.oldSliderToMove+i]=this.val[this.oldSliderToMove]+(this.val[s]-this.val[this.oldSliderToMove])*(i/(h+1))}this.draw()}var o={};if(o[s]=this.val[s],"js"==this.destination||"node"==this.destination)o.list=this.val;else{o.list="";for(var n in this.val)o.list+=this.val[n]+" "}this.transmit(o),this.oldSliderToMove=s},n.prototype.setNumberOfSliders=function(t){this.sliders=t,this.val=[];for(var i=0;i<this.sliders;i++)this.val.push(.7);this.sliderWidth=this.realSpace.x/this.sliders,this.init()},n.prototype.setSliderValue=function(t,i){this.val[t]=i,this.draw();var s={};if(s[t]=this.val[t],"js"==this.destination||"node"==this.destination)s.list=this.val;else{s.list="";for(var e in this.val)s.list+=this.val[e]+" "}this.transmit(s)}},{"../core/widget":3,"../utils/math":6,util:51}],29:[function(t,i,s){var e=t("../utils/math"),h=t("../utils/drawing"),o=t("util"),n=t("../core/widget"),l=i.exports=function(t){this.defaultSize={width:200,height:200},n.call(this,t),this.nodeSize=this.GUI.w/10,this.val={touch1:{x:0,y:0}},this.nodes=[],this.text="multitouch",this.rainbow=["#00f","#04f","#08F","0AF","0FF"],this.mode="normal",this.rows=10,this.cols=10,this.matrixLabels=!1,this.init()};o.inherits(l,n),l.prototype.init=function(){this.nodeSize=this.GUI.w/10,this.draw()},l.prototype.draw=function(){this.erase();var t=this.context;t.fillStyle=this.colors.fill,t.fillRect(0,0,this.GUI.w,this.GUI.h);var i=0;if("matrix"==this.mode)for(var s=0;s<this.rows;s++)for(var e=0;e<this.cols;e++){t.beginPath(),t.fillStyle=this.colors.accent,t.strokeStyle=this.colors.border,t.lineWidth=1;var o=e*this.GUI.w/this.cols+this.GUI.w/this.cols/2,n=s*this.GUI.h/this.rows+this.GUI.h/this.rows/2;t.arc(o,n,this.GUI.h/this.rows/2,0,2*Math.PI,!0),t.stroke(),t.fillStyle=this.colors.border,t.textAlign="center",t.textBaseline="middle",this.matrixLabels&&(t.fillText(this.matrixLabels[i%this.matrixLabels.length],o,n),i++);var l={x:e*this.GUI.w/this.cols,y:s*this.GUI.h/this.rows,w:this.GUI.w/this.cols,h:this.GUI.h/this.rows};if(this.clickPos.touches.length>=1)for(var a=0;a<this.clickPos.touches.length;a++)h.isInside(this.clickPos.touches[a],l)&&(t.globalAlpha=.5,t.fillStyle=this.colors.accent,t.fill(),t.globalAlpha=.3,t.fillStyle=this.rainbow[a],t.fill(),t.globalAlpha=1);t.closePath()}else if(this.clickPos.touches.length>=1){for(var e=0;e<this.clickPos.touches.length;e++)t.globalAlpha=.5,t.beginPath(),t.fillStyle=this.colors.accent,t.strokeStyle=this.colors.border,t.lineWidth=this.lineWidth,t.arc(this.clickPos.touches[e].x,this.clickPos.touches[e].y,this.nodeSize,0,2*Math.PI,!0),t.fill(),t.closePath(),t.globalAlpha=.3,t.beginPath(),t.fillStyle=this.rainbow[e],t.strokeStyle=this.colors.border,t.lineWidth=this.lineWidth,t.arc(this.clickPos.touches[e].x,this.clickPos.touches[e].y,this.nodeSize,0,2*Math.PI,!0),t.fill(),t.closePath(),t.globalAlpha=1;t.clearRect(0,this.GUI.h,this.GUI.w,this.height-this.GUI.h)}else this.setFont(),t.fillStyle=this.colors.border,t.fillText(this.text,this.GUI.w/2,this.GUI.h/2),t.globalAlpha=1;this.drawLabel()},l.prototype.click=function(){this.draw(),this.sendit()},l.prototype.move=function(){this.clicked&&(this.draw(),this.sendit())},l.prototype.release=function(){if(!this.clicked){this.clickPos.touches=[];for(var t=0;5>t;t++)this.val["touch"+t]={x:0,y:0};this.transmit(this.val)}this.draw(),this.sendit()},l.prototype.sendit=function(){this.val={};for(var t=0;t<this.clickPos.touches.length;t++)this.val["touch"+t]={x:this.clickPos.touches[t].x/this.canvas.width,y:e.invert(this.clickPos.touches[t].y/this.canvas.height)};this.transmit(this.val)}},{"../core/widget":3,"../utils/drawing":5,"../utils/math":6,util:51}],30:[function(t,i,s){var e=t("../utils/math"),h=t("util"),o=t("../core/widget"),n=i.exports=function(t){this.defaultSize={width:50,height:20},o.call(this,t),this.val={value:0},this.min=-2e4,this.max=2e4,this.step=1,this.rate=.25,this.decimalPlaces=3,this.lostdata=0,this.actual=0,this.canvas.ontouchstart=null,this.canvas.ontouchmove=null,this.canvas.ontouchend=null;var i='<input type="text" nx="number" id="'+this.canvasID+'" style="height:'+this.GUI.h+"px;width:"+this.GUI.w+"px;font-size:"+this.GUI.h/2+'px;"></input><canvas height="1px" width="1px" style="display:none"></canvas>',s=this.canvas,h=this.canvas.style,n=s.parentNode,l=document.createElement("span");l.innerHTML=i,l.className="nx",n.replaceChild(l,s),this.el=document.getElementById(this.canvasID);for(var a in h)"height"!=a&&"width"!=a&&(this.el.style[a]=h[a]);if(this.label){var r=document.createElement("div");r.innerHTML=this.label,r.style.fontSize=this.labelSize/2.8+"px",r.style.fontFamily=this.labelFont,r.style.textAlign=this.labelAlign,r.style.lineHeight=this.labelSize+"px",r.style.width=this.GUI.w+"px",r.style.color=nx.colors.black,r.className="nxlabel",l.appendChild(r)}this.canvas=document.getElementById(this.canvasID),this.canvas.style.height=this.GUI.h+"px",this.canvas.style.fontSize=.6*this.GUI.h+"px",this.canvas.style.textAlign="left",this.canvas.style.backgroundColor=this.colors.fill,this.canvas.style.highlight=this.colors.fill,this.canvas.style.border="none",this.canvas.style.outline="none",this.canvas.style.padding="4px 10px",this.canvas.style.cursor="pointer",this.canvas.style.display="block",this.canvas.className="",this.canvas.addEventListener("blur",function(){this.canvas.style.backgroundColor=this.colors.fill,this.canvas.style.color=this.colors.black,this.canvas.value!=this.val.value&&(this.actual=parseFloat(this.canvas.value),this.actual=e.clip(this.actual,this.min,this.max),this.actual=e.prune(this.actual,this.decimalPlaces),this.set({value:this.actual},!0))}.bind(this)),this.canvas.addEventListener("keydown",function(t){(t.which<48||t.which>57)&&189!=t.which&&190!=t.which&&8!=t.which&&t.preventDefault(),13==t.which&&this.canvas.blur()}.bind(this)),nx.isTouchDevice?(this.canvas.ontouchstart=this.preTouch,this.canvas.ontouchmove=this.preTouchMove,this.canvas.ontouchend=this.preTouchRelease):this.canvas.addEventListener("mousedown",this.preClick,!1),this.canvas.style.userSelect="none !important",this.canvas.style.mozUserSelect="none !important",this.canvas.style.webkitUserSelect="none !important",this.init()};h.inherits(n,o),n.prototype.init=function(){this.draw()},n.prototype.draw=function(){this.canvas.value=this.val.value},n.prototype.click=function(t){this.canvas.readOnly=!0,this.actual=this.val.value},n.prototype.move=function(t){this.clicked&&(this.canvas.style.border="none",this.actual-=this.deltaMove.y*(this.rate*this.step),this.actual=e.clip(this.actual,this.min,this.max),this.val.value=Math.floor(this.actual/this.step)*this.step,this.val.value=e.prune(this.val.value,this.decimalPlaces),this.draw(),this.transmit(this.val))},n.prototype.release=function(t){!this.hasMoved&&this.canvas.readOnly&&(this.canvas.readOnly=!1,this.canvas.focus(),this.canvas.setSelectionRange(0,this.canvas.value.length),this.canvas.style.backgroundColor=this.colors.accent,this.canvas.style.color=this.colors.fill)}},{"../core/widget":3,"../utils/math":6,util:51}],31:[function(t,i,s){var e=t("util"),h=t("../core/widget"),o=i.exports=function(t){this.defaultSize={width:100,height:100},h.call(this,t)};e.inherits(o,h),o.prototype.init=function(){this.draw()},o.prototype.draw=function(){this.erase(),this.makeRoundedBG();var t=this.context;t.fillStyle=this.colors.border,t.lineWidth=this.lineWidth,t.fill()}},{"../core/widget":3,util:51}],32:[function(t,i,s){var e=t("../utils/math"),h=t("util"),o=t("../core/widget"),n=i.exports=function(t){this.defaultSize={width:150,height:100},o.call(this,t),this.nodeSize=15,this.val={x:.5,y:.5},this.init()};h.inherits(n,o),n.prototype.init=function(){this.nodeSize=Math.min(this.GUI.h,this.GUI.w)/10,this.nodeSize=Math.max(this.nodeSize,10),this.actualWid=this.GUI.w-2*this.nodeSize,this.actualHgt=this.GUI.h-2*this.nodeSize,this.draw()},n.prototype.draw=function(){this.erase();var t=this.context;t.fillStyle=this.colors.fill,t.fillRect(0,0,this.GUI.w,this.GUI.h);var i=this.val.x*this.actualWid+this.nodeSize,s=e.invert(this.val.y)*this.actualHgt+this.nodeSize;i<this.nodeSize?i=this.nodeSize:i>this.GUI.w-this.nodeSize&&(i=this.GUI.w-this.nodeSize),s<this.nodeSize?s=this.nodeSize:s>this.GUI.h-this.nodeSize&&(s=this.GUI.h-this.nodeSize),t.beginPath(),t.fillStyle=this.colors.accent,t.arc(i,s,this.nodeSize,0,2*Math.PI,!0),t.fill(),t.closePath(),this.clicked&&(t.beginPath(),t.fillStyle=this.colors.accent,t.arc(i,s,2*this.nodeSize,0,2*Math.PI,!0),t.fill(),t.closePath(),t.clearRect(0,this.GUI.h,this.GUI.w,this.height-this.GUI.h)),this.drawLabel()},n.prototype.click=function(){this.val.x=this.clickPos.x,this.val.y=this.clickPos.y,this.scaleNode(),this.val.state="click",this.transmit(this.val),this.draw()},n.prototype.move=function(){this.val.x=this.clickPos.x,this.val.y=this.clickPos.y,this.scaleNode(),this.val.state="move",this.transmit(this.val),this.draw()},n.prototype.release=function(){this.val.x=this.clickPos.x,this.val.y=this.clickPos.y,this.scaleNode(),this.val.state="release",this.transmit(this.val),this.draw()},n.prototype.scaleNode=function(){var t=this.val.x-this.nodeSize,i=this.val.y-this.nodeSize,s=e.clip(t/this.actualWid,0,1),h=e.clip(i/this.actualHgt,0,1);this.val.x=e.prune(s,3),this.val.y=e.prune(h,3),this.val.y=e.invert(this.val.y)},n.prototype.animate=function(t){switch(t){case"bounce":nx.aniItems.push(this.aniBounce.bind(this));break;case"none":nx.aniItems.splice(nx.aniItems.indexOf(this.aniBounce))}},n.prototype.aniBounce=function(){!this.clicked&&this.val.x&&(this.val.x+=this.deltaMove.x/2/this.GUI.w,this.val.y-=this.deltaMove.y/2/this.GUI.h,this.val.state="animated",e.bounce(this.val.x,0,1,this.deltaMove.x)!=this.deltaMove.x&&(this.deltaMove.x=e.bounce(this.val.x,0,1,this.deltaMove.x),this.val.state="bounce"),(this.val.y>=1||this.val.y<=0)&&(this.deltaMove.y=-1*e.bounce(this.val.y,0,1,this.deltaMove.y),this.val.state="bounce"),this.transmit(this.val),this.draw())},n.prototype.customDestroy=function(){nx.removeAni(this.aniBounce)}},{"../core/widget":3,"../utils/math":6,util:51}],33:[function(t,i,s){var e=t("util"),h=t("../core/widget"),o=t("../utils/math"),n=i.exports=function(t){this.defaultSize={width:110,height:35},h.call(this,t),this.val={start:.3,stop:.7,size:.4},this.hslider=!1,this.handle,this.relhandle,this.cap,this.firsttouch="start",this.mode="area",this.touchdown={},this.init()};e.inherits(n,h),n.prototype.init=function(){this.GUI.h>=this.GUI.w?this.hslider=!1:this.hslider=!0,null!=this.canvas.getAttribute("label")&&(this.label=this.canvas.getAttribute("label")),this.draw()},n.prototype.draw=function(){this.erase();var t,i,s,e,h=this.context;h.fillStyle=this.colors.fill,h.fillRect(0,0,this.GUI.w,this.GUI.h),this.hslider?(t=this.val.start*this.GUI.w,i=0,s=this.val.stop*this.GUI.w,e=this.GUI.h,h.fillStyle=this.colors.accent,h.fillRect(t,i,s-t,e-i)):(t=0,i=this.GUI.h-this.val.stop*this.GUI.h,s=this.GUI.w,e=this.GUI.h-this.val.start*this.GUI.h,h.fillStyle=this.colors.accent,h.fillRect(t,i,s-t,e-i)),this.drawLabel()},n.prototype.click=function(){"edge"==this.mode?this.hslider?Math.abs(this.clickPos.x-this.val.start*this.GUI.w)<Math.abs(this.clickPos.x-this.val.stop*this.GUI.w)?this.firsttouch="start":this.firsttouch="stop":Math.abs(Math.abs(this.clickPos.y-this.GUI.h)-this.val.start*this.GUI.h)<Math.abs(Math.abs(this.clickPos.y-this.GUI.h)-this.val.stop*this.GUI.h)?this.firsttouch="start":this.firsttouch="stop":"area"==this.mode&&(this.touchdown={x:this.clickPos.x,y:this.clickPos.y},this.startval={},this.startval.size=this.val.stop-this.val.start,this.startval.loc=this.val.start+this.startval.size/2),this.move()},n.prototype.move=function(){if("edge"==this.mode)this.hslider?"start"==this.firsttouch?(this.val.start=this.clickPos.x/this.GUI.w,this.clickPos.touches.length>1&&(this.val.stop=this.clickPos.touches[1].x/this.GUI.w)):(this.val.stop=this.clickPos.x/this.GUI.w,this.clickPos.touches.length>1&&(this.val.start=this.clickPos.touches[1].x/this.GUI.w)):"start"==this.firsttouch?(this.val.start=o.invert(this.clickPos.y/this.GUI.h),this.clickPos.touches.length>1&&(this.val.stop=o.invert(this.clickPos.touches[1].y/this.GUI.h))):(this.val.stop=o.invert(this.clickPos.y/this.GUI.h),this.clickPos.touches.length>1&&(this.val.start=o.invert(this.clickPos.touches[1].y/this.GUI.h))),this.val.stop<this.val.start&&(this.tempstart=this.val.start,this.val.start=this.val.stop,this.val.stop=this.tempstart,"start"==this.firsttouch?this.firsttouch="stop":this.firsttouch="start"),this.val={start:o.clip(this.val.start,0,1),stop:o.clip(this.val.stop,0,1)},this.val.size=o.prune(o.clip(Math.abs(this.val.stop-this.val.start),0,1),3),this.draw(),this.transmit(this.val);else if("area"==this.mode){var t,i;this.hslider?(t=this.clickPos.x/this.GUI.w,i=(this.touchdown.y-this.clickPos.y)/this.GUI.h):(t=nx.invert(this.clickPos.y/this.GUI.h),i=(this.touchdown.x-this.clickPos.x)/this.GUI.w,i*=-1),i/=3;var s=this.startval.size+i;s=o.clip(s,.001,1),this.val={start:t-s/2,stop:t+s/2},this.val.start=o.clip(this.val.start,0,1),this.val.stop=o.clip(this.val.stop,0,1),this.draw(),this.transmit(this.val)}}},{"../core/widget":3,"../utils/math":6,util:51}],34:[function(t,i,s){var e=t("util"),h=t("../core/widget"),o=i.exports=function(t){this.defaultSize={width:200,height:30},h.call(this,t),this.choices=[],this.val={},this.canvas.ontouchstart=null,this.canvas.ontouchmove=null,this.canvas.ontouchend=null,this.canvas.getAttribute("choices")&&(this.choices=this.canvas.getAttribute("choices"),this.choices=this.choices.split(","));var i='<select id="'+this.canvasID+'" class="nx" nx="select" style="height:'+this.GUI.h+"px;width:"+this.GUI.w+'px;" onchange="'+this.canvasID+'.change(this)"></select><canvas height="1px" width="1px" style="display:none"></canvas>',s=this.canvas,e=this.canvas.style,o=s.parentNode,n=document.createElement("span");n.innerHTML=i,n.className="nx",o.replaceChild(n,s),this.sel=document.getElementById(this.canvasID);for(var l in e)this.sel.style[l]=e[l];this.canvas=document.getElementById(this.canvasID),this.canvas.style.backgroundColor=this.colors.fill,this.canvas.style.border="solid 2px "+this.colors.border,this.canvas.style.color=this.colors.black,this.canvas.style.fontSize=Math.round(this.GUI.h/2.3)+"px",this.canvas.className=""};e.inherits(o,h),o.prototype.init=function(){this.canvas.style.backgroundColor=this.colors.fill,this.canvas.style.border="solid 2px "+this.colors.border,this.canvas.style.color=this.colors.black;var t=this.canvas.options.length;for(i=0;t>i;i++)this.canvas.options[i]=null;for(var i=0;i<this.choices.length;i++){var s=document.createElement("option");s.text=this.choices[i],s.value=this.choices[i],this.canvas.add(s,null)}this.val.text=this.choices[0]},o.prototype.change=function(t){this.val.text=t.value,this.transmit(this.val)},o.prototype.draw=function(){this.canvas.value=this.val.text,this.canvas.style.backgroundColor=this.colors.fill,this.canvas.style.color=this.colors.black,this.canvas.style.border="solid 2px "+this.colors.border}},{"../core/widget":3,util:51}],35:[function(t,i,s){var e=t("../utils/math"),h=t("util"),o=t("../core/widget"),n=i.exports=function(t){this.defaultSize={width:35,height:110},o.call(this,t),null!=this.canvas.getAttribute("min")?this.min=parseFloat(this.canvas.getAttribute("min")):this.min=0,null!=this.canvas.getAttribute("max")?this.max=parseFloat(this.canvas.getAttribute("max")):this.max=1,null!=this.canvas.getAttribute("step")?this.step=parseFloat(this.canvas.getAttribute("step")):this.step=.001,this.val.value=nx.scale(.7,0,1,this.min,this.max),this.mode="absolute",this.hslider=!1,this.handle,this.relhandle,this.cap,this.maxdigits=3,this.calculateDigits=nx.calculateDigits,this.init()};h.inherits(n,o),n.prototype.init=function(){this.GUI.h>=this.GUI.w?this.hslider=!1:this.hslider=!0,this.draw()},n.prototype.draw=function(){var t=this.normalize(this.val.value);this.digits=this.calculateDigits(),this.erase();var i,s,e,h,o,n,l,a,r,c=this.context;c.fillStyle=this.colors.fill,c.fillRect(0,0,this.GUI.w,this.GUI.h),this.hslider?(i=0,s=0,e=t*this.GUI.w,h=this.GUI.h,c.fillStyle=this.colors.accent,c.fillRect(i,s,e-i,h-s),o=this.GUI.h/2,o>6&&(e>this.digits.total*o/2?(c.fillStyle=this.colors.white,n=5):(c.fillStyle=this.colors.accent,n=e+5),l=this.GUI.h/2,a="left",r="middle")):(i=0,s=this.GUI.h-t*this.GUI.h,e=this.GUI.w,h=this.GUI.h,c.fillStyle=this.colors.accent,c.fillRect(i,s,e-i,h-s),o=this.GUI.w/this.digits.total*1.2,o>6&&(s<this.GUI.h-o/2-5?(c.fillStyle=this.colors.white,l=this.GUI.h-o/2-5):(c.fillStyle=this.colors.accent,l=s-o/2-5),n=this.GUI.w/2,a="center",r="middle"));var u=this.val.value.toFixed(this.digits.decimals);c.textBaseline=r,c.textAlign=a,c.font=o+"px 'Open Sans'",c.fillText(u,n,l),this.label&&this.drawLabel()},n.prototype.click=function(){this.move()},n.prototype.move=function(){var t=this.normalize(this.val.value);this.hslider?(this.handle=this.clickPos.x,this.relhandle=this.deltaMove.x,this.cap=this.GUI.w):(this.handle=this.clickPos.y,this.relhandle=-1*this.deltaMove.y,this.cap=this.GUI.h),"absolute"==this.mode?this.clicked&&(t=this.hslider?e.clip(this.clickPos.x/this.GUI.w,0,1):Math.abs(e.clip(this.clickPos.y/this.GUI.h,0,1)-1),this.draw()):"relative"==this.mode&&this.clicked&&(t=this.hslider?e.clip(t+this.deltaMove.x/this.GUI.w,0,1):e.clip(t+-1*this.deltaMove.y/this.GUI.h,0,1),this.draw()),this.val.value=e.prune(this.rangify(t),3),this.transmit(this.val)}},{"../core/widget":3,"../utils/math":6,util:51}],36:[function(t,i,s){var e=t("util"),h=t("../core/widget"),o=i.exports=function(t){this.defaultSize={width:150,height:75},h.call(this,t),this.val={string:0,x:0},this.numberOfStrings=10,this.strings=[],this.abovestring=[],this.friction=1;this.init(),nx.aniItems.push(this.draw.bind(this))};e.inherits(o,h),o.prototype.init=function(){for(var t=this.GUI.h/(this.numberOfStrings+1),i=0;i<this.numberOfStrings;i++)this.strings[i]={x1:this.lineWidth,y1:t*(1+i),x2:this.GUI.w-this.lineWidth,y2:t*(i+1),held:!1,vibrating:!1,force:0,maxstretch:0,stretch:0,direction:0,above:!1};this.draw()},o.prototype.pulse=function(){this.draw()},o.prototype.setStrings=function(t){this.numberOfStrings=t,this.strings=[],this.init()},o.prototype.draw=function(){this.erase();var t=this.context;t.strokeStyle=this.colors.border,t.fillStyle=this.colors.fill,t.lineWidth=this.lineWidth,t.fillRect(0,0,this.GUI.w,this.GUI.h),t.strokeStyle=this.colors.accent;for(var i=0;i<this.strings.length;i++){var s=this.strings[i];s.vibrating?(s.maxstretch<0&&(s.vibrating=!1,s.held=!1),s.stretch=s.stretch+s.direction,Math.abs(s.stretch)>s.maxstretch&&(s.direction*=-1,s.stretch=s.stretch+s.direction,s.maxstretch=s.maxstretch-this.friction,s.direction=s.direction/Math.abs(s.direction)*(s.maxstretch/1)),t.beginPath(),t.moveTo(s.x1,s.y1),t.quadraticCurveTo(this.GUI.w/2,s.y1+s.stretch,s.x2,s.y2),t.stroke(),t.closePath(),s.on=!0):s.held?(t.beginPath(),t.moveTo(s.x1,s.y1),t.quadraticCurveTo(this.clickPos.x,this.clickPos.y,s.x2,s.y2),t.stroke(),t.closePath(),s.on=!0):(t.beginPath(),t.moveTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.stroke(),t.closePath(),s.on&&(s.on=!1))}this.drawLabel()},o.prototype.click=function(){for(var t=0;t<this.numberOfStrings;t++)this.strings[t].above=this.clickPos.y<this.strings[t].y1;this.draw()},o.prototype.move=function(){if(this.clicked)for(var t=0;t<this.strings.length;t++)this.strings[t].above!=this.clickPos.y<this.strings[t].y1&&(this.strings[t].held=!0,this.strings[t].above^=!0),this.strings[t].held&&Math.abs(this.clickPos.y-this.strings[t].y1)>this.GUI.h/(3*this.strings.length)&&this.pluck(t)},o.prototype.release=function(){for(var t=0;t<this.strings.length;t++)this.strings[t].held&&this.pluck(t)},o.prototype.pluck=function(t){var i=t;this.val={string:i,x:this.clickPos.x/this.GUI.w},this.transmit(this.val),this.strings[i].held=!1,this.strings[i].force=this.clickPos.y-this.strings[i].y1,this.strings[i].maxstretch=Math.abs(this.clickPos.y-this.strings[i].y1),this.strings[i].stretch=this.clickPos.y-this.strings[i].y1,this.strings[i].vibrating=!0,this.strings[i].direction=(this.clickPos.y-this.strings[i].y1)/Math.abs(this.clickPos.y-this.strings[i].y1)*((this.clickPos.y-this.strings[i].y1)/-1.2)},o.prototype.customDestroy=function(){nx.removeAni(this.draw.bind(this))}},{"../core/widget":3,util:51}],37:[function(t,i,s){var e=(t("../utils/math"),t("util")),h=t("../core/widget"),o=i.exports=function(t){this.defaultSize={width:150,height:50},h.call(this,t),this.choice=0,this.val={index:0,text:""},this.tabwid=0,this.options=["one","two","three"],this.init()};e.inherits(o,h),o.prototype.init=function(){this.draw()},o.prototype.draw=function(){var t=this.context;t.fillStyle=this.colors.fill,t.fillRect(0,0,this.GUI.w,this.GUI.h),t.textAlign="center",t.textBaseline="middle",t.font="normal "+this.GUI.h/5+"px courier",this.tabwid=this.GUI.w/this.options.length;for(var i,s,e=0;e<this.options.length;e++)e==this.choice?(i=this.colors.accent,s=this.colors.white):(i=this.colors.fill,s=this.colors.black,t.globalAlpha=.7),t.fillStyle=i,t.fillRect(this.tabwid*e,0,this.tabwid,this.GUI.h),e!=this.options.length-1&&(t.beginPath(),t.moveTo(this.tabwid*(e+1),0),t.lineTo(this.tabwid*(e+1),this.GUI.h),t.lineWidth=1,t.strokeStyle=this.colors.border,t.stroke(),t.closePath()),t.fillStyle=s,t.font=this.fontSize+"px "+this.font,t.fillText(this.options[e],this.tabwid*e+this.tabwid/2,this.GUI.h/2);
},o.prototype.click=function(){this.choice=~~(this.clickPos.x/this.tabwid),this.val={index:this.choice,text:this.options[this.choice]},this.transmit(this.val),this.draw()}},{"../core/widget":3,"../utils/math":6,util:51}],38:[function(t,i,s){var e=t("util"),h=t("../core/widget"),o=i.exports=function(t){this.defaultSize={width:200,height:100},h.call(this,t),this.val={text:""};var i='<textarea id="'+this.canvasID+'" style="height:'+this.GUI.h+"px;width:"+this.GUI.w+'px;" onkeydown="'+this.canvasID+'.change(event,this)"></textarea><canvas height="1px" width="1px" style="display:none"></canvas>',s=this.canvas,e=this.canvas.style,o=s.parentNode,n=document.createElement("span");n.innerHTML=i,n.className="nx",o.replaceChild(n,s),this.el=document.getElementById(this.canvasID);for(var l in e)this.el.style[l]=e[l];this.el.style.display="block",this.el.style.backgroundColor=this.colors.fill,this.el.style.border="none",this.el.style.color=this.colors.black,this.el.style.outline="none",this.el.style.resize="none",this.el.style.boxSizing="border-box",this.el.style.padding="5px",this.el.style.fontFamily=nx.font,this.el.style.fontSize="16px",this.el.className="",this.canvas=document.getElementById(this.canvasID)};e.inherits(o,h),o.prototype.init=function(){this.canvas.ontouchstart=null,this.canvas.ontouchmove=null,this.canvas.ontouchend=null,this.canvas.style.backgroundColor=this.colors.fill,this.canvas.style.color=this.colors.black},o.prototype.change=function(t,i){this.val.text=i.value,"13"==t.which&&(this.transmit(this.val),this.val.text="",this.draw(),t.preventDefault())},o.prototype.draw=function(){this.el.value=this.val.text,this.canvas.style.backgroundColor=this.colors.fill,this.canvas.style.color=this.colors.black}},{"../core/widget":3,util:51}],39:[function(t,i,s){var e=t("../utils/math"),h=t("util"),o=t("../core/widget"),n=i.exports=function(t){this.defaultSize={width:50,height:50},o.call(this,t),this.tiltLR,this.tiltFB,this.z,this.active=!0,this.val={x:0,y:0,z:0},this.text="TILT",this.init(),this.boundChromeTilt=this.chromeTilt.bind(this),this.boundMozTilt=this.mozTilt.bind(this),window.DeviceOrientationEvent?window.addEventListener("deviceorientation",this.boundChromeTilt,!1):window.OrientationEvent?window.addEventListener("MozOrientation",this.boundMozTilt,!1):console.log("Not supported on your device or browser.")};h.inherits(n,o),n.prototype.deviceOrientationHandler=function(){this.val={x:e.prune(this.tiltLR/90,3),y:e.prune(this.tiltFB/90,3),z:e.prune(this.z,3)},this.active&&this.transmit(this.val)},n.prototype.chromeTilt=function(t){this.tiltLR=t.gamma,this.tiltFB=t.beta,this.z=t.alpha,this.deviceOrientationHandler(),this.draw()},n.prototype.mozTilt=function(t){this.tiltLR=90*t.x,this.tiltFB=-90*t.y,this.z=t.z,this.deviceOrientationHandler(),this.draw()},n.prototype.init=function(){this.draw()},n.prototype.draw=function(){this.erase();var t=this.context;t.fillStyle=this.colors.fill,t.fillRect(0,0,this.GUI.w,this.GUI.h),t.save(),t.translate(this.GUI.w/2,this.GUI.h/2),t.rotate(-this.val.x*Math.PI/2),t.translate(-this.GUI.w/2,-this.GUI.h/2),t.globalAlpha=.4,this.active?t.fillStyle=this.colors.accent:t.fillStyle=this.colors.border,t.fillRect(-this.GUI.w,this.GUI.h*(this.val.y/2)+this.GUI.h/2,3*this.GUI.w,2*this.GUI.h),t.font="bold "+this.GUI.h/5+"px "+this.font,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,this.GUI.w/2,this.GUI.h*(this.val.y/2)+this.GUI.h/2-this.GUI.h/15),t.globalAlpha=1,t.restore(),t.clearRect(0,this.GUI.h,this.GUI.w,this.height-this.GUI.h),this.drawLabel()},n.prototype.click=function(){this.active=!this.active},n.prototype.customDestroy=function(){this.active=!1,window.removeEventListener("deviceorientation",this.boundChromeTilt,!1),window.removeEventListener("mozOrientation",this.boundMozTilt,!1)}},{"../core/widget":3,"../utils/math":6,util:51}],40:[function(t,i,s){var e=(t("../utils/drawing"),t("util")),h=t("../core/widget"),o=i.exports=function(t){this.defaultSize={width:50,height:50},h.call(this,t),this.val={value:0},this.init()};e.inherits(o,h),o.prototype.init=function(){this.draw()},o.prototype.draw=function(){this.erase();var t=this.context;this.val.value?(t.fillStyle=this.colors.accent,t.strokeStyle=this.colors.accenthl,t.strokeAlpha=1):(t.fillStyle=this.colors.fill,t.strokeStyle=this.colors.border,t.strokeAlpha=1),t.lineWidth=Math.sqrt(this.GUI.w)/2,t.fillRect(0,0,this.GUI.w,this.GUI.h),t.globalAlpha=t.strokeAlpha,t.strokeRect(t.lineWidth/2,t.lineWidth/2,this.GUI.w-t.lineWidth,this.GUI.h-t.lineWidth),t.globalAlpha=1,this.drawLabel()},o.prototype.click=function(){this.val.value?this.val.value=0:this.val.value=1,this.draw(),this.transmit(this.val)}},{"../core/widget":3,"../utils/drawing":5,util:51}],41:[function(t,i,s){var e=t("../utils/math"),h=t("util"),o=t("../core/widget"),n=i.exports=function(t){this.defaultSize={width:200,height:200},o.call(this,t),this.nodeSize=8,this.val={path:[]},this.limit=20,this.space=0,this.init()};h.inherits(n,o),n.prototype.init=function(){this.nodeSize=Math.min(this.GUI.h,this.GUI.w)/10,this.nodeSize=Math.max(this.nodeSize,10),this.draw()},n.prototype.draw=function(){this.erase();var t=this.context;t.fillStyle=this.colors.fill,t.fillRect(0,0,this.GUI.w,this.GUI.h),t.fillStyle=this.colors.fill,t.globalAlpha=.7;for(var i=0;i<this.val.path.length;i++){var s=this.val.path[i].x*this.GUI.w,e=this.val.path[i].y*this.GUI.h;t.beginPath(),t.fillStyle=this.colors.accent,t.arc(s,e,this.nodeSize,0,2*Math.PI,!0),t.fill(),t.closePath()}t.globalAlpha=1,this.drawLabel()},n.prototype.click=function(){this.val.path=[],this.space=0,this.move(),this.draw()},n.prototype.move=function(){if(this.space++,this.space>2&&this.val.path.length<this.limit){this.space=0;var t=e.clip(this.clickPos.x,0,this.GUI.w)/this.GUI.w,i=e.clip(this.clickPos.y,0,this.GUI.h)/this.GUI.h;this.val.path.push({x:t,y:i})}this.draw()},n.prototype.release=function(){this.transmit(this.val)}},{"../core/widget":3,"../utils/math":6,util:51}],42:[function(t,i,s){var e=t("../utils/drawing"),h=t("util"),o=t("../core/widget"),n=i.exports=function(t){this.defaultSize={width:300,height:100},o.call(this,t),this.letter="",this.keywid=this.GUI.w/14.5,this.keyhgt=this.GUI.h/5,this.active=!0,this.val={key:"",ascii:0,on:0},this.rows=[[{symbol:"`",value:192,width:1,on:!1},{symbol:"1",value:49,width:1,on:!1},{symbol:"2",value:50,width:1,on:!1},{symbol:"3",value:51,width:1,on:!1},{symbol:"4",value:52,width:1,on:!1},{symbol:"5",value:53,width:1,on:!1},{symbol:"6",value:54,width:1,on:!1},{symbol:"7",value:55,width:1,on:!1},{symbol:"8",value:56,width:1,on:!1},{symbol:"9",value:57,width:1,on:!1},{symbol:"0",value:48,width:1,on:!1},{symbol:"-",value:189,width:1,on:!1},{symbol:"=",value:187,width:1,on:!1},{symbol:"delete",value:46,width:1.5,on:!1}],[{symbol:"tab",value:9,width:1.5,on:!1},{symbol:"q",value:81,width:1,on:!1},{symbol:"w",value:87,width:1,on:!1},{symbol:"e",value:69,width:1,on:!1},{symbol:"r",value:82,width:1,on:!1},{symbol:"t",value:84,width:1,on:!1},{symbol:"y",value:89,width:1,on:!1},{symbol:"u",value:85,width:1,on:!1},{symbol:"i",value:73,width:1,on:!1},{symbol:"o",value:79,width:1,on:!1},{symbol:"p",value:80,width:1,on:!1},{symbol:"[",value:219,width:1,on:!1},{symbol:"]",value:221,width:1,on:!1},{symbol:"\\",value:220,width:1,on:!1}],[{symbol:"caps",value:20,width:1.75,on:!1},{symbol:"a",value:65,width:1,on:!1},{symbol:"s",value:83,width:1,on:!1},{symbol:"d",value:68,width:1,on:!1},{symbol:"f",value:70,width:1,on:!1},{symbol:"g",value:71,width:1,on:!1},{symbol:"h",value:72,width:1,on:!1},{symbol:"j",value:74,width:1,on:!1},{symbol:"k",value:75,width:1,on:!1},{symbol:"l",value:76,width:1,on:!1},{symbol:";",value:186,width:1,on:!1},{symbol:"'",value:222,width:1,on:!1},{symbol:"enter",value:13,width:1.75,on:!1}],[{symbol:"shift",value:16,width:2.25,on:!1},{symbol:"z",value:90,width:1,on:!1},{symbol:"x",value:88,width:1,on:!1},{symbol:"c",value:67,width:1,on:!1},{symbol:"v",value:86,width:1,on:!1},{symbol:"b",value:66,width:1,on:!1},{symbol:"n",value:78,width:1,on:!1},{symbol:"m",value:77,width:1,on:!1},{symbol:",",value:188,width:1,on:!1},{symbol:".",value:190,width:1,on:!1},{symbol:"/",value:191,width:1,on:!1},{symbol:"shift",value:16,width:2.25,on:!1}],[{symbol:"fn",value:10,width:1,on:!1},{symbol:"ctrl",value:17,width:1,on:!1},{symbol:"opt",value:10,width:1,on:!1},{symbol:"cmd",value:10,width:1.25,on:!1},{symbol:"space",value:32,width:5,on:!1},{symbol:"cmd",value:10,width:1,on:!1},{symbol:"opt",value:10,width:1,on:!1},{symbol:"left",value:37,width:.81,on:!1},{symbol:"up",value:38,width:.81,on:!1},{symbol:"down",value:40,width:.81,on:!1},{symbol:"right",value:39,width:.81,on:!1}]],this.boundType=this.typekey.bind(this),this.boundUntype=this.untype.bind(this),window.addEventListener("keydown",this.boundType),window.addEventListener("keyup",this.boundUntype),this.init()};h.inherits(n,o),n.prototype.init=function(){this.keywid=this.GUI.w/14.5,this.keyhgt=this.GUI.h/5,this.draw()},n.prototype.draw=function(){this.erase();var t=this.context;t.globalAlpha=this.active?1:.4,t.strokeStyle=this.colors.borderhl,t.fillStyle=this.colors.accent,t.lineWidth=1;for(var i=0;i<this.rows.length;i++)for(var s=0,h=0;h<this.rows[i].length;h++)this.val.key==this.rows[i][h].symbol&&(this.val.on?this.rows[i][h].on=!0:this.rows[i][h].on=!1),e.makeRoundRect(this.context,s,i*this.keyhgt,this.keywid*this.rows[i][h].width,this.keyhgt,4),this.rows[i][h].on?(t.fillStyle=this.colors.accent,t.strokeStyle=this.colors.accent,t.fill(),t.stroke()):(t.fillStyle=this.colors.fill,t.strokeStyle=this.colors.borderhl,t.fill(),t.stroke()),s+=this.keywid*this.rows[i][h].width;this.val.on&&(this.setFont(),t.fillStyle=this.colors.borderhl,t.font=this.GUI.h+"px "+this.font,t.fillText(this.val.key,this.GUI.w/2,this.GUI.h/2),t.globalAlpha=1),this.active||(t.globalAlpha=.7,t.fillStyle=this.colors.borderhl,t.font=this.GUI.h/2+"px courier",t.textAlign="center",t.textBaseline="middle",t.fillText("inactive",this.GUI.w/2,this.GUI.h/2)),this.drawLabel()},n.prototype.click=function(t){this.active=!this.active,this.draw()},n.prototype.typekey=function(t){if(this.active){for(var i=t.which,s=0;s<this.rows.length;s++)for(var e=0;e<this.rows[s].length;e++)if(i==this.rows[s][e].value){this.val.key=this.rows[s][e].symbol,this.val.on=1,this.val.ascii=t.which,this.transmit(this.val);break}this.draw()}},n.prototype.untype=function(t){if(this.active){for(var i=t.which,s=0;s<this.rows.length;s++)for(var e=0;e<this.rows[s].length;e++)if(i==this.rows[s][e].value){this.val.key=this.rows[s][e].symbol,this.val.on=0,this.val.ascii=t.which,this.transmit(this.val);break}this.draw()}},n.prototype.customDestroy=function(){window.removeEventListener("keydown",this.boundType),window.removeEventListener("keyup",this.boundUntype)}},{"../core/widget":3,"../utils/drawing":5,util:51}],43:[function(t,i,s){var e=t("../utils/math"),h=t("util"),o=t("../core/widget"),n=i.exports=function(t){this.defaultSize={width:100,height:100},o.call(this,t),this.circleSize,this.speed=.05,this.defaultspeed=.05,this.rotation=0,this.hasMovedOnce=!1,this.lockResize=!0,this.val={speed:0},this.init(),nx.aniItems.push(this.spin.bind(this))};h.inherits(n,o),n.prototype.init=function(){this.circleSize=Math.min(this.center.x,this.center.y)-this.lineWidth,this.draw()},n.prototype.draw=function(){this.erase();var t=this.context;t.strokeStyle=this.colors.border,t.fillStyle=this.colors.fill,t.fillRect(0,0,this.GUI.w,this.GUI.h),t.beginPath(),t.fillStyle=this.colors.black,t.arc(this.center.x,this.center.y,this.circleSize-5,0,2*Math.PI,!0),t.fill(),t.closePath(),t.beginPath(),t.fillStyle=this.colors.accent,t.arc(this.center.x,1*this.center.y,this.circleSize/4,0,2*Math.PI,!1),t.fill(),t.closePath(),t.beginPath(),t.globalAlpha=.5,t.fillStyle=this.colors.fill,t.arc(this.center.x,this.center.y,this.circleSize,this.rotation,this.rotation+.4,!1),t.lineTo(this.center.x,this.center.y),t.arc(this.center.x,this.center.y,this.circleSize,this.rotation+Math.PI,this.rotation+Math.PI+.4,!1),t.lineTo(this.center.x,this.center.y),t.fill(),t.globalAlpha=1,t.closePath(),t.beginPath(),t.fillStyle=this.colors.white,t.arc(this.center.x,1*this.center.y,this.circleSize/16,0,2*Math.PI,!1),t.fill(),t.closePath(),this.drawLabel()},n.prototype.click=function(t){this.hasMovedOnce=!1,this.lastRotation=this.rotation,this.grabAngle=this.rotation%(2*Math.PI),this.grabPos=e.toPolar(this.clickPos.x-this.center.x,this.clickPos.y-this.center.y).angle},n.prototype.move=function(){this.hasMovedOnce||(this.hasMovedOnce=!0,this.grabAngle=this.rotation%(2*Math.PI),this.grabPos=e.toPolar(this.clickPos.x-this.center.x,this.clickPos.y-this.center.y).angle),this.rotation=e.toPolar(this.clickPos.x-this.center.x,this.clickPos.y-this.center.y).angle+this.grabAngle-this.grabPos},n.prototype.release=function(){this.speed=(this.rotation-this.lastRotation+(this.lastRotation-this.lastRotation2))/2},n.prototype.spin=function(){this.clicked?this.speed/=1.1:this.speed=.9*this.speed+.1*this.defaultspeed,this.val.speed=20*(this.rotation-this.lastRotation),this.lastRotation2=this.lastRotation,this.lastRotation=this.rotation,this.rotation+=this.speed,this.draw(),this.transmit(this.val)},n.prototype.customDestroy=function(){nx.removeAni(this.spin.bind(this))}},{"../core/widget":3,"../utils/math":6,util:51}],44:[function(t,i,s){var e=t("util"),h=t("../core/widget"),o=t("../utils/math"),n=i.exports=function(t){this.defaultSize={width:400,height:125},h.call(this,t),this.val={start:0,stop:0,size:0,starttime:0,stoptime:0,looptime:0},this.handle,this.relhandle,this.cap,this.firsttouch="start",this.buffer=[],nx.isMobile?this.definition=3:this.definition=1,this.pieces=!1,this.channels=1,this.rawbuffer=[],this.times=[{dur:10,format:1},{dur:50,format:1},{dur:100,format:1},{dur:200,format:1},{dur:500,format:1},{dur:1e3,format:1},{dur:2e3,format:1},{dur:5e3,format:1},{dur:1e4,format:3},{dur:15e3,format:3},{dur:6e4,format:3},{dur:12e4,format:3},{dur:3e5,format:3},{dur:6e5,format:3}],this.timescale=!1,this.mode="area",this.touchdown={},this.init()};e.inherits(n,h),n.prototype.init=function(){this.pieces=~~(this.GUI.w/this.definition),this.draw()},n.prototype.setBuffer=function(t){for(this.channels=t.numberOfChannels,this.duration=t.duration,this.sampleRate=t.sampleRate,this.waveHeight=this.GUI.h/this.channels,this.durationMS=1e3*this.duration,this.timescale=0;~~(this.durationMS/this.times[this.timescale].dur)>7&&this.timescale<this.times.length;)this.timescale++;this.timescale=this.times[this.timescale],this.rawbuffer=[],this.buffer=[];for(var i=0;i<this.channels;i++){this.rawbuffer.push(t.getChannelData(0)),this.buffer.push([]);for(var s=~~(this.rawbuffer[0].length/(5*this.sampleRate))+1,e=~~(this.rawbuffer[i].length/this.pieces),h=0,o=0,n=0,l=0;l<this.rawbuffer[i].length;l+=s)this.rawbuffer[i][l]>0?h=Math.max(h,this.rawbuffer[i][l]):o=Math.min(o,this.rawbuffer[i][l]),l>n*e&&(this.buffer[i].push([h,o]),n++,o=0,h=0)}this.val.start&&this.val.stop,this.val.starttime=Math.round(this.val.start*this.durationMS),this.val.stoptime=Math.round(this.val.stop*this.durationMS),this.val.looptime=Math.round(this.val.size*this.durationMS),this.draw()},n.prototype.select=function(t,i){this.val.start=o.clip(t/this.durationMS,0,1),this.val.stop=o.clip(i/this.durationMS,0,1),this.val.size=this.val.stop-this.val.start,this.val.starttime=t,this.val.stoptime=i,this.val.looptime=t-i,this.transmit(this.val),this.draw()},n.prototype.draw=function(){var t=this.context;t.fillStyle=this.colors.fill,t.fillRect(0,0,this.GUI.w,this.GUI.h);for(var i=0;i<this.buffer.length;i++){t.fillStyle=this.colors.black,this.waveTop=i*this.waveHeight,this.waveCenter=this.waveTop+this.waveHeight/2;for(var s=0;s<this.buffer[i].length;s++){var e=this.waveCenter-this.buffer[i][s][0]*this.waveHeight,h=this.waveCenter+Math.abs(this.buffer[i][s][1]*this.waveHeight);h-=e,t.fillRect(s*this.definition,e,this.definition,h)}}if(t.globalAlpha=.3,t.fillStyle=this.colors.border,t.fillRect(0,0,this.GUI.w,16),t.globalAlpha=1,t.textBaseline="middle",t.textAlign="left",t.fontSize="8px",this.timescale)for(var i=1;i<this.durationMS/this.timescale.dur;i++){var n=i*this.timescale.dur/this.durationMS;n*=this.GUI.w,t.fillStyle=this.colors.border,t.fillRect(n,0,1,this.GUI.h),t.fillStyle=this.colors.black,t.globalAlpha=.6,t.fillText(this.msToTime(i*this.timescale.dur,this.timescale.format),n+5,8),t.globalAlpha=1}var l=this.val.start*this.GUI.w,a=0,r=this.val.stop*this.GUI.w,c=this.GUI.h;if(t.fillStyle=this.colors.accent,t.strokeStyle=this.colors.accent,t.lineWidth=2,t.globalAlpha=.3,t.fillRect(l,a,r-l,c-a),t.globalAlpha=.7,t.strokeRect(l,a-2,r-l,c-a+4),this.durationMS&&this.val.looptime){this.val.size=this.val.stop-this.val.start,t.textAlign="center";var u=this.val.looptime;u>1e3?(u/=1e3,o.prune(u,2),u+=" s"):(o.prune(u,0),u+=" ms"),t.fillText(u,l+(r-l)/2,this.GUI.h/2)}t.globalAlpha=1},n.prototype.msToTime=function(t,i){i=i||2;var s=~~(t/1e3),e=s%60;s=(s-e)/60;var h=s%60,o=t%1e3;return e=10>e&&h?e+"0":e,1==i?e+"."+o:2==i?h+":"+e+"."+o:3==i?h+":"+e:void 0},n.prototype.click=function(){"edge"==this.mode?Math.abs(this.clickPos.x-this.val.start*this.GUI.w)<Math.abs(this.clickPos.x-this.val.stop*this.GUI.w)?this.firsttouch="start":this.firsttouch="stop":"area"==this.mode&&(this.touchdown={x:this.clickPos.x,y:this.clickPos.y},this.startval={},this.startval.size=this.val.stop-this.val.start,this.startval.loc=this.val.start+this.startval.size/2),this.move()},n.prototype.move=function(){if("edge"==this.mode)"start"==this.firsttouch?(this.val.start=this.clickPos.x/this.GUI.w,this.clickPos.touches.length>1&&(this.val.stop=this.clickPos.touches[1].x/this.GUI.w)):(this.val.stop=this.clickPos.x/this.GUI.w,this.clickPos.touches.length>1&&(this.val.start=this.clickPos.touches[1].x/this.GUI.w)),this.val.stop<this.val.start&&(this.tempstart=this.val.start,this.val.start=this.val.stop,this.val.stop=this.tempstart,"start"==this.firsttouch?this.firsttouch="stop":this.firsttouch="start");else if("area"==this.mode){var t=this.clickPos.x/this.GUI.w,i=(this.touchdown.y-this.clickPos.y)/this.GUI.h;i/=4;var s=this.startval.size+i;s=o.clip(s,.001,1),this.val={start:t-s/2,stop:t+s/2}}this.val.start=o.clip(this.val.start,0,1),this.val.stop=o.clip(this.val.stop,0,1),this.val.size=o.clip(Math.abs(this.val.stop-this.val.start),0,1),this.durationMS&&(this.val.starttime=Math.round(this.val.start*this.durationMS),this.val.stoptime=Math.round(this.val.stop*this.durationMS),this.val.looptime=Math.round(this.val.size*this.durationMS)),this.transmit(this.val),this.draw()}},{"../core/widget":3,"../utils/math":6,util:51}],45:[function(t,i,s){var e=t("util"),h=t("../core/widget"),o=t("../utils/math"),n=i.exports=function(t){this.defaultSize={width:400,height:125},h.call(this,t),this.val={starttime:0,stoptime:0,looptime:50,start:0,stop:0,size:0,level:0,state:"off"},this.handle,this.relhandle,this.cap,this.firsttouch="start",this.buffer=[],nx.isMobile?this.definition=1:this.definition=1,this.pieces=!1,this.channels=1,this.rawbuffer=[],this.times=[{dur:10,format:1},{dur:50,format:1},{dur:100,format:1},{dur:200,format:1},{dur:500,format:1},{dur:1e3,format:1},{dur:2e3,format:1},{dur:5e3,format:1},{dur:1e4,format:3},{dur:15e3,format:3},{dur:6e4,format:3},{dur:12e4,format:3},{dur:3e5,format:3},{dur:6e5,format:3}],this.timescale=!1,this.mode="area",this.touchdown={},this.init()};e.inherits(n,h),n.prototype.init=function(){this.pieces=~~(this.GUI.w/this.definition),this.draw()},n.prototype.setBuffer=function(t){for(this.channels=t.numberOfChannels,this.duration=t.duration,this.sampleRate=t.sampleRate,this.waveHeight=this.GUI.h/this.channels,this.durationMS=1e3*this.duration,this.timescale=0;~~(this.durationMS/this.times[this.timescale].dur)>7&&this.timescale<this.times.length;)this.timescale++;this.timescale=this.times[this.timescale],this.rawbuffer=[],this.buffer=[];for(var i=0;i<this.channels;i++){this.rawbuffer.push(t.getChannelData(0)),this.buffer.push([]);for(var s=~~(this.rawbuffer[0].length/(5*this.sampleRate))+1,e=~~(this.rawbuffer[i].length/this.pieces),h=0,o=0,n=0,l=0;l<this.rawbuffer[i].length;l+=s)this.rawbuffer[i][l]>0?h=Math.max(h,this.rawbuffer[i][l]):o=Math.min(o,this.rawbuffer[i][l]),l>n*e&&(this.buffer[i].push([h,o]),n++,o=0,h=0)}this.val.start&&this.val.stop,this.val.starttime=Math.round(this.val.start*this.durationMS),this.val.stoptime=Math.round(this.val.stop*this.durationMS),this.draw()},n.prototype.select=function(t,i){this.val.start=o.clip(t/this.durationMS,0,1),this.val.stop=o.clip(i/this.durationMS,0,1),this.val.size=this.val.stop-this.val.start,this.val.starttime=t,this.val.stoptime=i,this.val.looptime=t-i,this.transmit(this.val),this.draw()},n.prototype.draw=function(){var t=this.context;t.fillStyle=this.colors.fill,t.fillRect(0,0,this.GUI.w,this.GUI.h);for(var i=0;i<this.buffer.length;i++){t.fillStyle=this.colors.black,this.waveTop=i*this.waveHeight,this.waveCenter=this.waveTop+this.waveHeight/2;for(var s=0;s<this.buffer[i].length;s++){var e=this.waveCenter-this.buffer[i][s][0]*this.waveHeight,h=this.waveCenter+Math.abs(this.buffer[i][s][1]*this.waveHeight);h-=e,t.fillRect(s*this.definition,e,this.definition,h)}}if(t.globalAlpha=.3,t.fillStyle=this.colors.border,t.fillRect(0,0,this.GUI.w,16),t.globalAlpha=1,t.textBaseline="middle",t.textAlign="left",t.fontSize="8px",this.timescale)for(var i=1;i<this.durationMS/this.timescale.dur;i++){var o=i*this.timescale.dur/this.durationMS;o*=this.GUI.w,t.fillStyle=this.colors.border,t.fillRect(o,0,1,this.GUI.h),t.fillStyle=this.colors.black,t.globalAlpha=.6,t.fillText(this.msToTime(i*this.timescale.dur,this.timescale.format),o+5,8),t.globalAlpha=1}if("on"==this.val.state){var n=this.val.start*this.GUI.w,l=this.val.level*this.GUI.h;this.val.stop*this.GUI.w,this.GUI.h;t.fillStyle=this.colors.accent,t.strokeStyle=this.colors.accent,t.lineWidth=2,t.globalAlpha=.3,t.beginPath(),t.arc(n,l,30,0,2*Math.PI,!1),t.fill(),t.globalAlpha=.7,t.stroke(),t.globalAlpha=1}},n.prototype.msToTime=function(t,i){i=i||2;var s=~~(t/1e3),e=s%60;s=(s-e)/60;var h=s%60,o=t%1e3;return e=10>e&&h?e+"0":e,1==i?e+"."+o:2==i?h+":"+e+"."+o:3==i?h+":"+e:void 0},n.prototype.click=function(){this.durationMS&&(this.val.state="on",this.move())},n.prototype.move=function(){this.clickPos.x<0&&(this.clickPos.x=0),this.clickPos.x>this.GUI.w&&(this.clickPos.x=this.GUI.w),this.clickPos.y<0&&(this.clickPos.y=0),this.clickPos.y>this.GUI.h&&(this.clickPos.y=this.GUI.h),this.val.state="on",this.durationMS&&(this.val.start=this.clickPos.x/this.GUI.w-this.val.looptime/this.durationMS/2,this.val.size=this.val.looptime/this.durationMS,this.val.stop=this.val.start+this.val.size,this.val.starttime=Math.round(this.val.start*this.durationMS),this.val.looptime=Math.round(this.val.size*this.durationMS),this.val.stoptime=this.val.starttime+this.val.looptime,this.val.level=this.clickPos.y/this.GUI.h,this.transmit(this.val),this.draw())},n.prototype.release=function(){this.val.state="off",this.transmit(this.val),this.draw()},n.prototype.tick=function(){this.val.state="on",this.transmit(this.val)}},{"../core/widget":3,"../utils/math":6,util:51}],46:[function(t,i,s){var e=(t("../utils/math"),t("util")),h=t("../core/widget"),o=i.exports=function(t){this.defaultSize={width:200,height:200},h.call(this,t),this.val={items:[],add:!1,remove:!1,change:!1},this.size=.25,this.meta=!1,this.resizing=!1,this.init(),document.addEventListener("keydown",function(t){t.shiftKey&&!this.meta&&(this.meta=!0,this.draw())}.bind(this)),document.addEventListener("keyup",function(t){!t.shiftKey&&this.meta&&(this.meta=!1,this.draw())}.bind(this))};e.inherits(o,h),o.prototype.init=function(){this.draw()},o.prototype.add=function(t,i,s,e){this.val.items.push({x:t,y:i,w:s,h:e}),this.draw()},o.prototype.setWindow=function(t,i){this.val.items[t]=i,this.draw()},o.prototype.remove=function(t){this.val.items.splice(t,1),this.val.add=!1,this.val.remove=t,this.val.change=!1,this.transmit(this.val),this.draw()},o.prototype.draw=function(){var t=this.context;t.fillStyle=this.meta?this.colors.border:this.colors.fill,t.fillRect(0,0,this.GUI.w,this.GUI.h),t.globalAlpha=.8;for(var i=0;i<this.val.items.length;i++){t.fillStyle=this.colors.accent;var s=this.val.items[i].x*this.GUI.w,e=this.val.items[i].y*this.GUI.h,h=this.val.items[i].w*this.GUI.w,o=this.val.items[i].h*this.GUI.h;t.fillRect(s,e,h,o),t.strokeStyle=this.colors.fill,t.lineWidth=1,t.strokeRect(s+h-10,e+o-10,10,10)}t.globalAlpha=1,this.drawLabel()},o.prototype.click=function(){this.holds=!1;for(var t=this.clickPos.x/this.GUI.w,i=this.clickPos.y/this.GUI.h,s=0;s<this.val.items.length;s++)nx.isInside({x:t,y:i},this.val.items[s])&&(this.holds=s,this.clickPos.x>(this.val.items[s].x+this.val.items[s].w)*this.GUI.w-10&&this.clickPos.x<(this.val.items[s].x+this.val.items[s].w)*this.GUI.w&&this.clickPos.y>(this.val.items[s].y+this.val.items[s].h)*this.GUI.h-10&&this.clickPos.y<(this.val.items[s].y+this.val.items[s].h)*this.GUI.h&&(this.resizing=!0));if(this.holds===!1&&(this.val.items.push({x:t,y:i,w:this.size,h:this.size}),this.holds=this.val.items.length-1,this.hasMoved=!0,this.val.add=this.val.items[this.holds],this.val.remove=!1,this.val.change=!1,this.transmit(this.val)),this.meta){for(var s=0;s<this.val.items.length;s++)this.val.items[s].tx=this.val.items[s].x,this.val.items[s].ty=this.val.items[s].y;this.tx=t,this.ty=i}this.draw()},o.prototype.move=function(){var t=this.clickPos.x/this.GUI.w,i=this.clickPos.y/this.GUI.h;if(this.resizing)if(this.meta)for(var s=0;s<this.val.items.length;s++)this.val.items[s].w=t-this.val.items[this.holds].x,this.val.items[s].h=i-this.val.items[this.holds].y,this.val.items[s]=this.restrict(this.val.items[s]);else this.val.items[this.holds].w=t-this.val.items[this.holds].x,this.val.items[this.holds].h=i-this.val.items[this.holds].y,this.val.items[this.holds]=this.restrict(this.val.items[this.holds]);else if(this.meta)for(var s=0;s<this.val.items.length;s++)this.val.items[s].x=t-this.tx+this.val.items[s].tx,this.val.items[s].y=i-this.ty+this.val.items[s].ty,this.val.items[s]=this.restrict(this.val.items[s]);else this.val.items[this.holds].x=t,this.val.items[this.holds].y=i,this.val.items[this.holds]=this.restrict(this.val.items[this.holds]);this.val.change=!0,this.val.add=!1,this.val.remove=!1,this.transmit(this.val),this.draw()},o.prototype.release=function(){this.hasMoved||(this.meta?(this.val.add=!1,this.val.remove="all",this.val.change=!1,this.val.items=[]):(this.val.add=!1,this.val.remove=this.holds,this.val.change=!1,this.val.items.splice(this.holds,1))),this.resizing=!1,this.transmit(this.val),this.draw()},o.prototype.restrict=function(t){return t.x<0&&(t.x=0),t.y<0&&(t.y=0),t.x+t.w>1&&(t.x=1-t.w),t.y+t.h>1&&(t.y=1-t.h),t}},{"../core/widget":3,"../utils/math":6,util:51}],47:[function(t,i,s){function e(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function h(t){return"function"==typeof t}function o(t){return"number"==typeof t}function n(t){return"object"==typeof t&&null!==t}function l(t){return void 0===t}i.exports=e,e.EventEmitter=e,e.prototype._events=void 0,e.prototype._maxListeners=void 0,e.defaultMaxListeners=10,e.prototype.setMaxListeners=function(t){if(!o(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},e.prototype.emit=function(t){var i,s,e,o,a,r;if(this._events||(this._events={}),"error"===t&&(!this._events.error||n(this._events.error)&&!this._events.error.length)){if(i=arguments[1],i instanceof Error)throw i;throw TypeError('Uncaught, unspecified "error" event.')}if(s=this._events[t],l(s))return!1;if(h(s))switch(arguments.length){case 1:s.call(this);break;case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:for(e=arguments.length,o=new Array(e-1),a=1;e>a;a++)o[a-1]=arguments[a];s.apply(this,o)}else if(n(s)){for(e=arguments.length,o=new Array(e-1),a=1;e>a;a++)o[a-1]=arguments[a];for(r=s.slice(),e=r.length,a=0;e>a;a++)r[a].apply(this,o)}return!0},e.prototype.addListener=function(t,i){var s;if(!h(i))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,h(i.listener)?i.listener:i),this._events[t]?n(this._events[t])?this._events[t].push(i):this._events[t]=[this._events[t],i]:this._events[t]=i,n(this._events[t])&&!this._events[t].warned){var s;s=l(this._maxListeners)?e.defaultMaxListeners:this._maxListeners,s&&s>0&&this._events[t].length>s&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},e.prototype.on=e.prototype.addListener,e.prototype.once=function(t,i){function s(){this.removeListener(t,s),e||(e=!0,i.apply(this,arguments))}if(!h(i))throw TypeError("listener must be a function");var e=!1;return s.listener=i,this.on(t,s),this},e.prototype.removeListener=function(t,i){var s,e,o,l;if(!h(i))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(s=this._events[t],o=s.length,e=-1,s===i||h(s.listener)&&s.listener===i)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,i);else if(n(s)){for(l=o;l-->0;)if(s[l]===i||s[l].listener&&s[l].listener===i){e=l;break}if(0>e)return this;1===s.length?(s.length=0,delete this._events[t]):s.splice(e,1),this._events.removeListener&&this.emit("removeListener",t,i)}return this},e.prototype.removeAllListeners=function(t){var i,s;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(i in this._events)"removeListener"!==i&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events={},this}if(s=this._events[t],h(s))this.removeListener(t,s);else for(;s.length;)this.removeListener(t,s[s.length-1]);return delete this._events[t],this},e.prototype.listeners=function(t){var i;return i=this._events&&this._events[t]?h(this._events[t])?[this._events[t]]:this._events[t].slice():[]},e.listenerCount=function(t,i){var s;return s=t._events&&t._events[i]?h(t._events[i])?1:t._events[i].length:0}},{}],48:[function(t,i,s){function e(){}var h=i.exports={};h.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,i="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(i){var s=[];return window.addEventListener("message",function(t){var i=t.source;if((i===window||null===i)&&"process-tick"===t.data&&(t.stopPropagation(),s.length>0)){var e=s.shift();e()}},!0),function(t){s.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),h.title="browser",h.browser=!0,h.env={},h.argv=[],h.on=e,h.addListener=e,h.once=e,h.off=e,h.removeListener=e,h.removeAllListeners=e,h.emit=e,h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")}},{}],49:[function(t,i,s){"function"==typeof Object.create?i.exports=function(t,i){t.super_=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:i.exports=function(t,i){t.super_=i;var s=function(){};s.prototype=i.prototype,t.prototype=new s,t.prototype.constructor=t}},{}],50:[function(t,i,s){i.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],51:[function(t,i,s){(function(i,e){function h(t,i){var e={seen:[],stylize:n};return arguments.length>=3&&(e.depth=arguments[2]),arguments.length>=4&&(e.colors=arguments[3]),v(i)?e.showHidden=i:i&&s._extend(e,i),x(e.showHidden)&&(e.showHidden=!1),x(e.depth)&&(e.depth=2),x(e.colors)&&(e.colors=!1),x(e.customInspect)&&(e.customInspect=!0),e.colors&&(e.stylize=o),
a(e,t,e.depth)}function o(t,i){var s=h.styles[i];return s?"["+h.colors[s][0]+"m"+t+"["+h.colors[s][1]+"m":t}function n(t,i){return t}function l(t){var i={};return t.forEach(function(t,s){i[t]=!0}),i}function a(t,i,e){if(t.customInspect&&i&&G(i.inspect)&&i.inspect!==s.inspect&&(!i.constructor||i.constructor.prototype!==i)){var h=i.inspect(e,t);return g(h)||(h=a(t,h,e)),h}var o=r(t,i);if(o)return o;var n=Object.keys(i),v=l(n);if(t.showHidden&&(n=Object.getOwnPropertyNames(i)),U(i)&&(n.indexOf("message")>=0||n.indexOf("description")>=0))return c(i);if(0===n.length){if(G(i)){var m=i.name?": "+i.name:"";return t.stylize("[Function"+m+"]","special")}if(I(i))return t.stylize(RegExp.prototype.toString.call(i),"regexp");if(S(i))return t.stylize(Date.prototype.toString.call(i),"date");if(U(i))return c(i)}var y="",w=!1,b=["{","}"];if(p(i)&&(w=!0,b=["[","]"]),G(i)){var x=i.name?": "+i.name:"";y=" [Function"+x+"]"}if(I(i)&&(y=" "+RegExp.prototype.toString.call(i)),S(i)&&(y=" "+Date.prototype.toUTCString.call(i)),U(i)&&(y=" "+c(i)),0===n.length&&(!w||0==i.length))return b[0]+y+b[1];if(0>e)return I(i)?t.stylize(RegExp.prototype.toString.call(i),"regexp"):t.stylize("[Object]","special");t.seen.push(i);var k;return k=w?u(t,i,e,v,n):n.map(function(s){return d(t,i,e,v,s,w)}),t.seen.pop(),f(k,y,b)}function r(t,i){if(x(i))return t.stylize("undefined","undefined");if(g(i)){var s="'"+JSON.stringify(i).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(s,"string")}return w(i)?t.stylize(""+i,"number"):v(i)?t.stylize(""+i,"boolean"):m(i)?t.stylize("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function u(t,i,s,e,h){for(var o=[],n=0,l=i.length;l>n;++n)A(i,String(n))?o.push(d(t,i,s,e,String(n),!0)):o.push("");return h.forEach(function(h){h.match(/^\d+$/)||o.push(d(t,i,s,e,h,!0))}),o}function d(t,i,s,e,h,o){var n,l,r;if(r=Object.getOwnPropertyDescriptor(i,h)||{value:i[h]},r.get?l=r.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):r.set&&(l=t.stylize("[Setter]","special")),A(e,h)||(n="["+h+"]"),l||(t.seen.indexOf(r.value)<0?(l=m(s)?a(t,r.value,null):a(t,r.value,s-1),l.indexOf("\n")>-1&&(l=o?l.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+l.split("\n").map(function(t){return"   "+t}).join("\n"))):l=t.stylize("[Circular]","special")),x(n)){if(o&&h.match(/^\d+$/))return l;n=JSON.stringify(""+h),n.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(n=n.substr(1,n.length-2),n=t.stylize(n,"name")):(n=n.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),n=t.stylize(n,"string"))}return n+": "+l}function f(t,i,s){var e=0,h=t.reduce(function(t,i){return e++,i.indexOf("\n")>=0&&e++,t+i.replace(/\u001b\[\d\d?m/g,"").length+1},0);return h>60?s[0]+(""===i?"":i+"\n ")+" "+t.join(",\n  ")+" "+s[1]:s[0]+i+" "+t.join(", ")+" "+s[1]}function p(t){return Array.isArray(t)}function v(t){return"boolean"==typeof t}function m(t){return null===t}function y(t){return null==t}function w(t){return"number"==typeof t}function g(t){return"string"==typeof t}function b(t){return"symbol"==typeof t}function x(t){return void 0===t}function I(t){return k(t)&&"[object RegExp]"===z(t)}function k(t){return"object"==typeof t&&null!==t}function S(t){return k(t)&&"[object Date]"===z(t)}function U(t){return k(t)&&("[object Error]"===z(t)||t instanceof Error)}function G(t){return"function"==typeof t}function P(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function z(t){return Object.prototype.toString.call(t)}function M(t){return 10>t?"0"+t.toString(10):t.toString(10)}function T(){var t=new Date,i=[M(t.getHours()),M(t.getMinutes()),M(t.getSeconds())].join(":");return[t.getDate(),B[t.getMonth()],i].join(" ")}function A(t,i){return Object.prototype.hasOwnProperty.call(t,i)}var L=/%[sdj%]/g;s.format=function(t){if(!g(t)){for(var i=[],s=0;s<arguments.length;s++)i.push(h(arguments[s]));return i.join(" ")}for(var s=1,e=arguments,o=e.length,n=String(t).replace(L,function(t){if("%%"===t)return"%";if(s>=o)return t;switch(t){case"%s":return String(e[s++]);case"%d":return Number(e[s++]);case"%j":try{return JSON.stringify(e[s++])}catch(i){return"[Circular]"}default:return t}}),l=e[s];o>s;l=e[++s])n+=m(l)||!k(l)?" "+l:" "+h(l);return n},s.deprecate=function(t,h){function o(){if(!n){if(i.throwDeprecation)throw new Error(h);i.traceDeprecation?console.trace(h):console.error(h),n=!0}return t.apply(this,arguments)}if(x(e.process))return function(){return s.deprecate(t,h).apply(this,arguments)};if(i.noDeprecation===!0)return t;var n=!1;return o};var R,C={};s.debuglog=function(t){if(x(R)&&(R=i.env.NODE_DEBUG||""),t=t.toUpperCase(),!C[t])if(new RegExp("\\b"+t+"\\b","i").test(R)){var e=i.pid;C[t]=function(){var i=s.format.apply(s,arguments);console.error("%s %d: %s",t,e,i)}}else C[t]=function(){};return C[t]},s.inspect=h,h.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},h.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},s.isArray=p,s.isBoolean=v,s.isNull=m,s.isNullOrUndefined=y,s.isNumber=w,s.isString=g,s.isSymbol=b,s.isUndefined=x,s.isRegExp=I,s.isObject=k,s.isDate=S,s.isError=U,s.isFunction=G,s.isPrimitive=P,s.isBuffer=t("./support/isBuffer");var B=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];s.log=function(){console.log("%s - %s",T(),s.format.apply(s,arguments))},s.inherits=t("inherits"),s._extend=function(t,i){if(!i||!k(i))return t;for(var s=Object.keys(i),e=s.length;e--;)t[s[e]]=i[s[e]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":50,_process:48,inherits:49}],52:[function(t,i,s){var e,h=Object.prototype.hasOwnProperty,o=Object.prototype.toString,n=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===o.call(t)},l=function(t){"use strict";if(!t||"[object Object]"!==o.call(t))return!1;var i=h.call(t,"constructor"),s=t.constructor&&t.constructor.prototype&&h.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!i&&!s)return!1;var n;for(n in t);return n===e||h.call(t,n)};i.exports=function a(){"use strict";var t,i,s,h,o,r,c=arguments[0],u=1,d=arguments.length,f=!1;for("boolean"==typeof c?(f=c,c=arguments[1]||{},u=2):("object"!=typeof c&&"function"!=typeof c||null==c)&&(c={});d>u;++u)if(t=arguments[u],null!=t)for(i in t)s=c[i],h=t[i],c!==h&&(f&&h&&(l(h)||(o=n(h)))?(o?(o=!1,r=s&&n(s)?s:[]):r=s&&l(s)?s:{},c[i]=a(f,r,h)):h!==e&&(c[i]=h));return c}},{}],53:[function(t,i,s){!function(){function t(t,i,s){return t.call.apply(t.bind,arguments)}function s(t,i,s){if(!t)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,e),t.apply(i,s)}}return function(){return t.apply(i,arguments)}}function e(i,h,o){return e=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?t:s,e.apply(null,arguments)}function h(t,i){this.a=t,this.m=i||t,this.c=this.m.document}function o(t,i,s,e){if(i=t.c.createElement(i),s)for(var h in s)s.hasOwnProperty(h)&&("style"==h?i.style.cssText=s[h]:i.setAttribute(h,s[h]));return e&&i.appendChild(t.c.createTextNode(e)),i}function n(t,i,s){t=t.c.getElementsByTagName(i)[0],t||(t=document.documentElement),t.insertBefore(s,t.lastChild)}function l(t){t.parentNode&&t.parentNode.removeChild(t)}function a(t,i,s){i=i||[],s=s||[];for(var e=t.className.split(/\s+/),h=0;h<i.length;h+=1){for(var o=!1,n=0;n<e.length;n+=1)if(i[h]===e[n]){o=!0;break}o||e.push(i[h])}for(i=[],h=0;h<e.length;h+=1){for(o=!1,n=0;n<s.length;n+=1)if(e[h]===s[n]){o=!0;break}o||i.push(e[h])}t.className=i.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function r(t,i){for(var s=t.className.split(/\s+/),e=0,h=s.length;h>e;e++)if(s[e]==i)return!0;return!1}function c(t){if("string"==typeof t.f)return t.f;var i=t.m.location.protocol;return"about:"==i&&(i=t.a.location.protocol),"https:"==i?"https:":"http:"}function u(t){return t.m.location.hostname||t.a.location.hostname}function d(t,i,s){function e(){r&&h&&l&&(r(a),r=null)}i=o(t,"link",{rel:"stylesheet",href:i,media:"all"});var h=!1,l=!0,a=null,r=s||null;ht?(i.onload=function(){h=!0,e()},i.onerror=function(){h=!0,a=Error("Stylesheet failed to load"),e()}):setTimeout(function(){h=!0,e()},0),n(t,"head",i)}function f(t,i,s,e){var h=t.c.getElementsByTagName("head")[0];if(h){var n=o(t,"script",{src:i}),l=!1;return n.onload=n.onreadystatechange=function(){l||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(l=!0,s&&s(null),n.onload=n.onreadystatechange=null,"HEAD"==n.parentNode.tagName&&h.removeChild(n))},h.appendChild(n),setTimeout(function(){l||(l=!0,s&&s(Error("Script load timeout")))},e||5e3),n}return null}function p(){this.a=0,this.c=null}function v(t){return t.a++,function(){t.a--,y(t)}}function m(t,i){t.c=i,y(t)}function y(t){0==t.a&&t.c&&(t.c(),t.c=null)}function w(t){this.a=t||"-"}function g(t,i){this.c=t,this.f=4,this.a="n";var s=(i||"n4").match(/^([nio])([1-9])$/i);s&&(this.a=s[1],this.f=parseInt(s[2],10))}function b(t){return k(t)+" "+(t.f+"00")+" 300px "+x(t.c)}function x(t){var i=[];t=t.split(/,\s*/);for(var s=0;s<t.length;s++){var e=t[s].replace(/['"]/g,"");-1!=e.indexOf(" ")||/^\d/.test(e)?i.push("'"+e+"'"):i.push(e)}return i.join(",")}function I(t){return t.a+t.f}function k(t){var i="normal";return"o"===t.a?i="oblique":"i"===t.a&&(i="italic"),i}function S(t){var i=4,s="n",e=null;return t&&((e=t.match(/(normal|oblique|italic)/i))&&e[1]&&(s=e[1].substr(0,1).toLowerCase()),(e=t.match(/([1-9]00|normal|bold)/i))&&e[1]&&(/bold/i.test(e[1])?i=7:/[1-9]00/.test(e[1])&&(i=parseInt(e[1].substr(0,1),10)))),s+i}function U(t,i){this.c=t,this.f=t.m.document.documentElement,this.h=i,this.a=new w("-"),this.j=!1!==i.events,this.g=!1!==i.classes}function G(t){t.g&&a(t.f,[t.a.c("wf","loading")]),z(t,"loading")}function P(t){if(t.g){var i=r(t.f,t.a.c("wf","active")),s=[],e=[t.a.c("wf","loading")];i||s.push(t.a.c("wf","inactive")),a(t.f,s,e)}z(t,"inactive")}function z(t,i,s){t.j&&t.h[i]&&(s?t.h[i](s.c,I(s)):t.h[i]())}function M(){this.c={}}function T(t,i,s){var e,h=[];for(e in i)if(i.hasOwnProperty(e)){var o=t.c[e];o&&h.push(o(i[e],s))}return h}function A(t,i){this.c=t,this.f=i,this.a=o(this.c,"span",{"aria-hidden":"true"},this.f)}function L(t){n(t.c,"body",t.a)}function R(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+x(t.c)+";"+("font-style:"+k(t)+";font-weight:"+(t.f+"00")+";")}function C(t,i,s,e,h,o){this.g=t,this.j=i,this.a=e,this.c=s,this.f=h||3e3,this.h=o||void 0}function B(t,i,s,e,h,o,n){this.v=t,this.B=i,this.c=s,this.a=e,this.s=n||"BESbswy",this.f={},this.w=h||3e3,this.u=o||null,this.o=this.j=this.h=this.g=null,this.g=new A(this.c,this.s),this.h=new A(this.c,this.s),this.j=new A(this.c,this.s),this.o=new A(this.c,this.s),t=new g(this.a.c+",serif",I(this.a)),t=R(t),this.g.a.style.cssText=t,t=new g(this.a.c+",sans-serif",I(this.a)),t=R(t),this.h.a.style.cssText=t,t=new g("serif",I(this.a)),t=R(t),this.j.a.style.cssText=t,t=new g("sans-serif",I(this.a)),t=R(t),this.o.a.style.cssText=t,L(this.g),L(this.h),L(this.j),L(this.o)}function E(){if(null===nt){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);nt=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return nt}function N(t,i,s){for(var e in ot)if(ot.hasOwnProperty(e)&&i===t.f[ot[e]]&&s===t.f[ot[e]])return!0;return!1}function W(t){var i,s=t.g.a.offsetWidth,e=t.h.a.offsetWidth;(i=s===t.f.serif&&e===t.f["sans-serif"])||(i=E()&&N(t,s,e)),i?et()-t.A>=t.w?E()&&N(t,s,e)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?O(t,t.v):O(t,t.B):j(t):O(t,t.v)}function j(t){setTimeout(e(function(){W(this)},t),50)}function O(t,i){setTimeout(e(function(){l(this.g.a),l(this.h.a),l(this.j.a),l(this.o.a),i(this.a)},t),0)}function F(t,i,s){this.c=t,this.a=i,this.f=0,this.o=this.j=!1,this.s=s}function _(t){0==--t.f&&t.j&&(t.o?(t=t.a,t.g&&a(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),z(t,"active")):P(t.a))}function D(t){this.j=t,this.a=new M,this.h=0,this.f=this.g=!0}function q(t,i,s,h,o){var n=0==--t.h;(t.f||t.g)&&setTimeout(function(){var t=o||null,l=h||null||{};if(0===s.length&&n)P(i.a);else{i.f+=s.length,n&&(i.j=n);var r,c=[];for(r=0;r<s.length;r++){var u=s[r],d=l[u.c],f=i.a,p=u;if(f.g&&a(f.f,[f.a.c("wf",p.c,I(p).toString(),"loading")]),z(f,"fontloading",p),f=null,null===lt)if(window.FontFace){var p=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),v=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);lt=p?42<parseInt(p[1],10):v?!1:!0}else lt=!1;f=lt?new C(e(i.g,i),e(i.h,i),i.c,u,i.s,d):new B(e(i.g,i),e(i.h,i),i.c,u,i.s,t,d),c.push(f)}for(r=0;r<c.length;r++)c[r].start()}},0)}function H(t,i,s){var e=[],h=s.timeout;G(i);var e=T(t.a,s,t.c),o=new F(t.c,i,h);for(t.h=e.length,i=0,s=e.length;s>i;i++)e[i].load(function(i,s,e){q(t,o,i,s,e)})}function X(t,i){this.c=t,this.a=i}function Y(t,i,s){var e=c(t.c);return t=(t.a.api||"fast.fonts.net/jsapi").replace(/^.*http(s?):(\/\/)?/,""),e+"//"+t+"/"+i+".js"+(s?"?v="+s:"")}function $(t,i){this.c=t,this.a=i}function J(t,i,s){t?this.c=t:this.c=i+at,this.a=[],this.f=[],this.g=s||""}function V(t,i){for(var s=i.length,e=0;s>e;e++){var h=i[e].split(":");3==h.length&&t.f.push(h.pop());var o="";2==h.length&&""!=h[1]&&(o=":"),t.a.push(h.join(o))}}function K(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var i=t.a.length,s=[],e=0;i>e;e++)s.push(t.a[e].replace(/ /g,"+"));return i=t.c+"?family="+s.join("%7C"),0<t.f.length&&(i+="&subset="+t.f.join(",")),0<t.g.length&&(i+="&text="+encodeURIComponent(t.g)),i}function Q(t){this.f=t,this.a=[],this.c={}}function Z(t){for(var i=t.f.length,s=0;i>s;s++){var e=t.f[s].split(":"),h=e[0].replace(/\+/g," "),o=["n4"];if(2<=e.length){var n,l=e[1];if(n=[],l)for(var l=l.split(","),a=l.length,r=0;a>r;r++){var c;if(c=l[r],c.match(/^[\w-]+$/)){var u=dt.exec(c.toLowerCase());if(null==u)c="";else{if(c=u[2],c=null==c||""==c?"n":ut[c],u=u[1],null==u||""==u)u="4";else var d=ct[u],u=d?d:isNaN(u)?"4":u.substr(0,1);c=[c,u].join("")}}else c="";c&&n.push(c)}0<n.length&&(o=n),3==e.length&&(e=e[2],n=[],e=e?e.split(","):n,0<e.length&&(e=rt[e[0]])&&(t.c[h]=e))}for(t.c[h]||(e=rt[h])&&(t.c[h]=e),e=0;e<o.length;e+=1)t.a.push(new g(h,o[e]))}}function tt(t,i){this.c=t,this.a=i}function it(t,i){this.c=t,this.a=i}function st(t,i){this.c=t,this.f=i,this.a=[]}var et=Date.now||function(){return+new Date},ht=!!window.FontFace;w.prototype.c=function(t){for(var i=[],s=0;s<arguments.length;s++)i.push(arguments[s].replace(/[\W_]+/g,"").toLowerCase());return i.join(this.a)},C.prototype.start=function(){var t=this.c.m.document,i=this,s=et(),e=new Promise(function(e,h){function o(){et()-s>=i.f?h():t.fonts.load(b(i.a),i.h).then(function(t){1<=t.length?e():setTimeout(o,25)},function(){h()})}o()}),h=new Promise(function(t,s){setTimeout(s,i.f)});Promise.race([h,e]).then(function(){i.g(i.a)},function(){i.j(i.a)})};var ot={D:"serif",C:"sans-serif"},nt=null;B.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.o.a.offsetWidth,this.A=et(),W(this)};var lt=null;F.prototype.g=function(t){var i=this.a;i.g&&a(i.f,[i.a.c("wf",t.c,I(t).toString(),"active")],[i.a.c("wf",t.c,I(t).toString(),"loading"),i.a.c("wf",t.c,I(t).toString(),"inactive")]),z(i,"fontactive",t),this.o=!0,_(this)},F.prototype.h=function(t){var i=this.a;if(i.g){var s=r(i.f,i.a.c("wf",t.c,I(t).toString(),"active")),e=[],h=[i.a.c("wf",t.c,I(t).toString(),"loading")];s||e.push(i.a.c("wf",t.c,I(t).toString(),"inactive")),a(i.f,e,h)}z(i,"fontinactive",t),_(this)},D.prototype.load=function(t){this.c=new h(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,H(this,new U(this.c,t),t)},X.prototype.load=function(t){function i(){if(o["__mti_fntLst"+e]){var s,h=o["__mti_fntLst"+e](),n=[];if(h)for(var l=0;l<h.length;l++){var a=h[l].fontfamily;void 0!=h[l].fontStyle&&void 0!=h[l].fontWeight?(s=h[l].fontStyle+h[l].fontWeight,n.push(new g(a,s))):n.push(new g(a))}t(n)}else setTimeout(function(){i()},50)}var s=this,e=s.a.projectId,h=s.a.version;if(e){var o=s.c.m;f(this.c,Y(s,e,h),function(h){h?t([]):(o["__MonotypeConfiguration__"+e]=function(){return s.a},i())}).id="__MonotypeAPIScript__"+e}else t([])},$.prototype.load=function(t){var i,s,e=this.a.urls||[],h=this.a.families||[],o=this.a.testStrings||{},n=new p;for(i=0,s=e.length;s>i;i++)d(this.c,e[i],v(n));var l=[];for(i=0,s=h.length;s>i;i++)if(e=h[i].split(":"),e[1])for(var a=e[1].split(","),r=0;r<a.length;r+=1)l.push(new g(e[0],a[r]));else l.push(new g(e[0]));m(n,function(){t(l,o)})};var at="//fonts.googleapis.com/css",rt={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},ct={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},ut={i:"i",italic:"i",n:"n",normal:"n"},dt=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/,ft={Arimo:!0,Cousine:!0,Tinos:!0};tt.prototype.load=function(t){var i=new p,s=this.c,e=new J(this.a.api,c(s),this.a.text),h=this.a.families;V(e,h);var o=new Q(h);Z(o),d(s,K(e),v(i)),m(i,function(){t(o.a,o.c,ft)})},it.prototype.load=function(t){var i=this.a.id,s=this.c.m;i?f(this.c,(this.a.api||"https://use.typekit.net")+"/"+i+".js",function(i){if(i)t([]);else if(s.Typekit&&s.Typekit.config&&s.Typekit.config.fn){i=s.Typekit.config.fn;for(var e=[],h=0;h<i.length;h+=2)for(var o=i[h],n=i[h+1],l=0;l<n.length;l++)e.push(new g(o,n[l]));try{s.Typekit.load({events:!1,classes:!1,async:!0})}catch(a){}t(e)}},2e3):t([])},st.prototype.load=function(t){var i=this.f.id,s=this.c.m,e=this;i?(s.__webfontfontdeckmodule__||(s.__webfontfontdeckmodule__={}),s.__webfontfontdeckmodule__[i]=function(i,s){for(var h=0,o=s.fonts.length;o>h;++h){var n=s.fonts[h];e.a.push(new g(n.name,S("font-weight:"+n.weight+";font-style:"+n.style)))}t(e.a)},f(this.c,c(this.c)+(this.f.api||"//f.fontdeck.com/s/css/js/")+u(this.c)+"/"+i+".js",function(i){i&&t([])})):t([])};var pt=new D(window);pt.a.c.custom=function(t,i){return new $(i,t)},pt.a.c.fontdeck=function(t,i){return new st(i,t)},pt.a.c.monotype=function(t,i){return new X(i,t)},pt.a.c.typekit=function(t,i){return new it(i,t)},pt.a.c.google=function(t,i){return new tt(i,t)};var vt={load:e(pt.load,pt)};"function"==typeof define&&define.amd?define(function(){return vt}):"undefined"!=typeof i&&i.exports?i.exports=vt:(window.WebFont=vt,window.WebFontConfig&&pt.load(window.WebFontConfig))}()},{}]},{},[1]);